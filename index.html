<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="python,sergiojune,记录，算法"><title>sergiojune | 梦开始的地方 | 路在，人就在</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">sergiojune | 梦开始的地方</h1><a id="logo" href="/.">sergiojune | 梦开始的地方</a><p class="description">路在，人就在</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h2 class="post-title"><a href="/2018/08/07/python3.x爬取网易云音乐评论/">利用python爬取网易云音乐评论，并把数据存入mysql</a></h2><div class="post-meta"><p><span class="date">2018-08-07</span><span><a href="/categories/python/" class="category">python</a></span></p></div><div class="post-content"><section class="96edit" label="Powered by bj.96weixin.com" style="font-size:16px;"><section class="editor"><section editor="bj.96weixin.com" style="margin:0 auto;padding:0;box-sizing:border-box"><section class="yead_bgc wx-bg" style="border-style: solid; -webkit-border-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/v4vz52CcB13JzTTXXg3mC439fK28gxRK85c5jJicI6ia4ibEOx5DTicoiciamOZc6hcaLFy9S1AfhJzm8kUAHJnv4jtQ/0&quot;) 15 5 5 fill stretch; color: rgb(51, 51, 51); border-width: 10px 4px 4px; padding: 0px; box-sizing: border-box; background-color: rgb(51, 184, 108);"><section style="width: 100%; font-size: 14px; margin: 0px; line-height: 30px; padding: 0px 5px; box-sizing: border-box;" data-width="100%"><p style="padding:0;margin:0;text-align:justify">在简单学习了python爬虫后，又想继续折腾，进而找到了这个网易云音乐，因为本人平时就是用它听的歌，也喜欢看歌里的评论，所以就爬网易云音乐评论吧，那么开始吧！</p></section></section></section><p><br></p><section class="editor"><section class="editor"><section style="width:100%; text-align:center;" data-width="100%"><section style="display: inline-block; border-width: 5px; border-style: solid; -webkit-border-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/uN1LIav7oJ94OAxhxMZuj75SnON56cqmO9jNia9DuXHjVlkiasaiaJIbrtDbmTq6hK2es1BeyapTqz6viaZhgxkxZQ/0?wx_fmt=png&quot;) 5 fill; box-sizing: border-box;"><section style="padding: 2px 10px; text-align: center; color: rgb(225, 201, 255); font-size: 16px; box-sizing: border-box;"><strong>正式进入主题</strong></section></section></section></section></section><p><br></p><p>首先还是去找目标网页并开始分析网页结构，如下</p></section><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802044488.png" title="1802044488.png" alt=""></p><p><br></p><p>上面的三个箭头都是所要找的数据，分别是评论用户，评论和点赞数，都可以用正则表达式找出来，接下来继续找怎样找到下一页的数据，还是用开发者工具，但是当点击下一页的时候，网页的url没有变，说明网页是动态加载，所以就不能在当前网页找数据了，应该在他的<strong>xhr</strong>文件里找，所以点入<strong>network</strong>看看，然后也点击下一页一看，果然有想要的</p><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802044234.png" title="1802044234.png" alt=""></p><p>看到这里，就兴奋地去敲代码了</p><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802041841.png" title="1802041841.png" alt=""></p><p><br></p><p>一点击运行，结果什么东西都没有，但是他的状态码是200，明显请求成功啊，却没有东西返回，再去network仔细看看这个网页，看到他是个post请求，也看到了需要post两个参数params和ensSecKey</p><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802043912.png" title="1802043912.png" alt="">一看到这个，密密麻麻的数字和字母，就猜应该是被加密了，不过可以复制下来看看有没有用。接下来看下他的Response，咦，这是个json，不是html结构的，所以需要用到Json库来进行解析</p><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802045600.png" title="1802045600.png" alt=""></p><p>现在开始敲代码吧，先把上面的两个参数复制过来看看。</p><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802049865.png" title="1802049865.png" alt=""></p><p>现在把每条评论的评论用户和点赞数和评论获取出来</p><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802041977.png" title="1802041977.png" alt=""></p><p>可以看到，利用json.loads()方法把数据转成python格式里的字典后就可以把想要的数据取出来了，但是，下一页怎样取？总不能每次都复制粘贴那两个参数吧？那唯一的方法就是不爬了。。怎么可能？我的继续，那我就要进行破解这两个参数了，那好继续看<strong>network，</strong>因为要加密，肯定要用js进行加密的</p><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802041200.png" title="1802041200.png" alt=""></p><p>看到刚才那个网站的发起者core.js,,然后把它文件下载下来慢慢研究</p><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802041185.png" title="1802041185.png" alt=""></p><p>保存后在经过美化，然后进行查找那个encSecKey参数（ps:JSj’e’tong’yang’de美化网址为<a href="http://www.css88.com/tool/js_beautify/），然后找到这个" _src="http://www.css88.com/tool/js_beautify/），然后找到这个" target="_blank" rel="noopener">http://www.css88.com/tool/js_beautify/），然后找到这个</a></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802042238.png" title="1802042238.png" alt=""></p><p>看到window.asrsea()方法有四个参数，先不去管这个函数，先看看他的四个参数是什什，这里没必要去研究那四个参数怎样来的，只需要知道他是什么，那么我们可以加点代码上去让他显示出来，从而利用fiddler来进行调试</p><p>加入代码如下<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802041943.png" title="1802041943.png" alt=""></p><p>可以分别获取上面的每一个参数，也把那个params获取看看，然后在fiddler上操作如下</p><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802043715.png" title="1802043715.png" alt=""><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802041150.png" title="1802041150.png" alt=""></p><p>完成上面的设置后刷新网页就可以在console上面找到参数信息，如果没有的话这是因为你之前浏览该网页的时候它被缓存了下来，所以要清除缓存文件（在清除浏览器记录里面有）</p><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802042410.png" title="1802042410.png" alt=""></p><p>那个rid有本歌曲的id，明显是与评论有关的，我试着连翻几页后，发现那个offset就是评论偏移数，offset就是(页数-1)<em>20，total在第一页是true，在其他页是false<br></em></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802046744.png" title="1802046744.png" alt="">同样的方法也得到第二个参数为：010001</p><p>第三个参数为：00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7</p><p>第四个参数为：0CoJUm6Qyw8W8jud</p><p><br></p><p>接下来就要看window.asrsea()方法是什么操作的了，还是通过查找js文件可以看到这个<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802044023.png" title="1802044023.png" alt=""></p><p><br></p><p>通过研究i是随机获取十六个字符而b函数是<strong>AES加密</strong>，其中偏移量为<strong>0102030405060708</strong>，模式为<strong>CBC</strong>，看回d函数，其中<strong>params连续两次加密，第一次加密时，<span style="line-height: 25.6px; white-space: pre-wrap;">文本为第一个参数。密钥为第四个参数，第二次加密时文本为第一次加密的值，密钥为随机数a。而encS<span style="line-height: 25.6px; white-space: pre-wrap;">ec</span>key是一个RSA加密，他的公钥是第二个参数，模式是第三个参数，文本为那个随机字符串a</span></strong></p><p><br></p><p>终于分析完了，接着开始敲代码</p><p><br></p><p>先来个获取第一页评论的代码</p><p>这是获取两个参数的类<br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802057877.png" title="1802057877.png" alt=""><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802058447.png" title="1802058447.png" alt=""><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802056847.png" title="1802056847.png" alt=""></p><p><br></p><p>这是解析网易云音乐和获取评论的类</p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802051937.png" title="1802051937.png" alt=""><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802052702.png" title="1802052702.png" alt=""><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802056776.png" title="1802056776.png" alt=""></p><p><br></p><p>然而一点击运行，直接给我报了个错：<strong>TypeError: can’t concat str to bytes</strong></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802049613.png" title="1802049613.png" alt=""></p><p><br></p><p>原来是因为在第二次加密的时候，那个params是个byte类型，所以把他转成字符串类型就可以了<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802052783.png" title="1802052783.png" alt=""></p><p><br></p><p>再次点击运行，结果还是报错了：<strong>json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)</strong></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802057884.png" title="1802057884.png" alt=""></p><p><br></p><p>这个报错因为我的json解析错了，回头调试一看，<strong>网页返回的东西是空的，但他的状态码是200</strong>，这是什么鬼？接着我再试了把那两个参数的值直接复制和前面一样看看，结果运行成功，这就说明我的是加密过程错了，然后我就回去看了几篇，看不出什么错误，上网百度找到了这个知乎文章<strong><a href="https://zhuanlan.zhihu.com/p/32069543" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/32069543</a></strong>，我把她的代码复制过来运行下，结果是可以的，我就继续看看我和她的区别，原来我<strong>在用那个16个随机字符的时候用错了，我在两个参数给了两个不同的，而是需要给共同一个的</strong>，看到这里，我就直接回去改了下，果然运行成功，代码我就不贴出来了，效果如下<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802059926.png" title="1802059926.png" alt=""></p><p><br></p><p>接着是获取每一页的评论，而每一页与第一个参数的offset有关，其中的公式为<strong>offse=(页数-1)20</strong>，total在第一页是true，在其他页是false</p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802051477.png" title="1802051477.png" alt=""><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802058622.png" title="1802058622.png" alt=""><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802052656.png" title="1802052656.png" alt=""></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802055375.png" title="1802055375.png" alt="">而写入数据库我用的是我这篇文章的操作</p><div>&nbsp;<a href="http://mp.weixin.qq.com/s/6sQ_ER39P2NtXaPOnGdQNA" target="_blank" rel="noopener">http://mp.weixin.qq.com/s/6sQ_ER39P2NtXaPOnGdQNA</a><br></div><p>，由于篇幅过长，就不贴出来了，感兴趣的可以去看看<br></p><p><br></p><p>接下来点运行就可以了，但是运行到第八页的时候出现了这个异常</p><p><strong>raise errorclass(errno, errval)</strong></p><p><strong>pymysql.err.InternalError: (1366, “Incorrect string value: ‘\xF0\x9F\x92\x94’ for column ‘content’ at row 1”)</strong></p><p>原因是这条评论有个识别不了的表情，之后百度参考这篇文章<a href="http://blog.csdn.net/HHTNAN/article/details/76769264?locationNum=9&amp;fps=1修改了数据库的编码方式，注意还要自己修改下创建数据库时的编码方式才可！" _src="http://blog.csdn.net/HHTNAN/article/details/76769264?locationNum=9&amp;fps=1修改了数据库的编码方式，注意还要自己修改下创建数据库时的编码方式才可！" target="_blank" rel="noopener">http://blog.csdn.net/HHTNAN/article/details/76769264?locationNum=9&amp;fps=1修改了数据库的编码方式，注意还要自己修改下创建数据库时的编码方式才可！</a></p><p>这是首页数据库效果<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802053659.png" title="1802053659.png" alt=""></p><p><br></p><p>获取完成（家驹的歌评论这么少吗？不解）<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802055481.png" title="1802055481.png" alt=""></p><p><br></p><section class="editor"><p><img src="https://mmbiz.qlogo.cn/mmbiz/QKDxrVYehicdAibIVUpquF6TQUwXFg6dYCrLBEiasLaVyObib9LjK08qQ7IzkYKROO93uxoEnMSl8zRCWiaY7JwgZWg/0?wx_fmt=jpeg" style="margin: 0px; padding: 0px; max-width: 100%;"></p></section><p>终于完成了，虽然辛苦，但是值得，在这个过程中也学会了很多东西，在写这篇文章时参考了两篇文章，一个是知乎首个回答<a href="https://www.zhihu.com/question/36081767/answer/140287795，另一个就是解密过程https://github.com/cosven/cosven.github.io/issues/30" _src="https://www.zhihu.com/question/36081767/answer/140287795，另一个就是解密过程https://github.com/cosven/cosven.github.io/issues/30" target="_blank" rel="noopener">https://www.zhihu.com/question/36081767/answer/140287795，另一个就是解密过程https://github.com/cosven/cosven.github.io/issues/30</a></p><p>大家有什么问题的话欢迎去我的公众号<strong>日常学python</strong>的后台那里问我，我知道的我都一一为你解答，最后，若你也在这篇文章学到了，可以帮我点个赞，转发下吗？谢谢支持哈！</p><p><br></p><p>ps:若需要完整代码可以在我的公众号<strong>日常学python</strong>后台回复评论即可获取，还有其他福利以后会一一分析</p><p><span style="line-height: inherit;"></span><span style="line-height: inherit;">我的公众号的二维码<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802053253.png" title="1802053253.png" _src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802053253.png" alt=""></span></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p></section></div><p class="readmore"><a href="/2018/08/07/python3.x爬取网易云音乐评论/">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/07/hexo搭建的博客提交文章本地预览成功但github没有显示解决方法/">hexo搭建的博客提交文章本地预览成功但github没有显示解决方法</a></h2><div class="post-meta"><p><span class="date">2018-08-07</span><span><a href="/categories/blog/" class="category">blog</a></span></p></div><div class="post-content"><section class="96edit" label="Powered by bj.96weixin.com" style="font-size:16px;"><p>记录自己博客的一个坑！</p><p><br></p><p>前几天我写了文章，想发布在博客上，<strong>谁知道在提交上去，只可以在本地预览，却不可以在github上看到，</strong>而且github上也没有提交文章的记录。这个坑我百度了很久也没有找到，直到问到人，<strong>说需要升级git，然后升级了。</strong>果然，成功提交了！！！</p><p><br></p><p>升级git是直接在重新下载个git把原来的覆盖掉就可以了。</p><p><br></p><p>升级完成之后记得再提交一次，比如：</p><ul class=" list-paddingleft-2" style="list-style-type: disc; margin: 0px; padding: 0px 0px 0px 30px;"><li><p>hexo clean</p></li><li><p>hexo g</p></li><li><p>hexo d</p></li></ul><p>这样就可以了，如果还是不可以，可以选择清除下cookie及历史记录。</p><p><br></p><p><br></p><p>我完成了上面的之后，文章算是提交上去了，但是，我的主题没有了，<img src="http://pic.96weixin.com/upload/image2/vip/881679/1803/1803139675.png" title="1803139675.png" _src="http://pic.96weixin.com/upload/image2/vip/881679/1803/1803139675.png" alt=""></p><p>很悲催，没想到一坑还比一坑高，所以还是接着百度，看到了可能是我的<strong>github的仓库名字</strong>和我的hexo博客里的配置<strong>_config.yml</strong>​文件中的url名字不一样导致的<img src="http://pic.96weixin.com/upload/image2/vip/881679/1803/1803133008.png" title="1803133008.png" _src="http://pic.96weixin.com/upload/image2/vip/881679/1803/1803133008.png" alt=""></p><p><br></p><p>试了一下，果真是可以了。这个坑是前面那个坑乱改东西留下的，不过解决了，就好！！</p><p><br></p><p><br></p><p>生活不止眼前的bug，还有乐趣和斗志！</p><p><br></p><p><br></p><p><br></p><p><br></p></section></div><p class="readmore"><a href="/2018/08/07/hexo搭建的博客提交文章本地预览成功但github没有显示解决方法/">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/07/学习用python操作mysql/">学习用python操作mysql</a></h2><div class="post-meta"><p><span class="date">2018-08-07</span><span><a href="/categories/python/" class="category">python</a><a href="/categories/python/数据库/" class="category">数据库</a></span></p></div><div class="post-content"><p style="letter-spacing: 2px;">首先祝大家新年快乐哈！学生的估计明天也要上课了，工作的估计早就去上班了，我也快要上课了，哈哈，新年这段时间一直没有写过文章，一直忙于跑亲戚和学习，感觉有点对不起关注我的粉丝。所以，今天决定抽空写一篇技术文章来给大家看看，继上篇写了入门mysql之后，还没有学习如何用python来操作数据库，那我今天就带大家来学习如何用python操操作数据库。<br></p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">还有文末有福利，这算是给大家的新年礼物(记得点赞哦)</p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><br></p><section class="editor"><section style="margin:10px auto;"><section style="width: 100%; font-size: 18px; height: 40px; line-height: 40px; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(30, 28, 28); text-align: center; box-sizing: border-box;" data-width="100%">进入正题</section><section style="width: 100%; margin-top: 1px; border-top-style: solid; border-top-width: 1px; border-top-color: rgb(30, 28, 28); box-sizing: border-box;" data-width="100%"></section></section></section><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">工欲善其事，必先利其器。所以第一步，我们先下载第三方库。在这里，我用到的是pymysql库。</p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">下载库：在命令行输入</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="hljs nginx" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span><span class="hljs-attribute" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">pip</span> install pymysql<br></code></pre></section><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">下载后可检验一下是否成功下载。直接在命令行进入python然后导库即可</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="hljs ruby" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span><span class="hljs-symbol" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">C:</span>\Users\June&gt;python<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2</span>Python <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3.6</span>.<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span> <span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">|Anaconda, Inc.|</span> (default, Oct <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">15</span> <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2017</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">03</span><span class="hljs-symbol" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">:</span><span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">27</span><span class="hljs-symbol" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">:</span><span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">45</span>) [MSC v.<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1900</span> <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">64</span> bit (AMD64)] on win32<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>Type <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">“help”</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">“copyright”</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">“credits”</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">or</span> <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">“license”</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> more information.<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">4</span><span class="hljs-meta" style="font-size: inherit; line-height: inherit; color: rgb(91, 218, 237); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">&gt;&gt;</span>&gt; import pymysql<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">5</span><span class="hljs-meta" style="font-size: inherit; line-height: inherit; color: rgb(91, 218, 237); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">&gt;&gt;</span>&gt;<br></code></pre></section><p style="letter-spacing: 2px;">看到这个画面就说明下载成功了，接下来学习如何操作数据库了！！！</p><p style="letter-spacing: 2px;"><br></p><section class="editor"><section style="margin:20px auto 16px;text-align:center;"><section style="border-top-style: solid; border-top-width: 1px; border-top-color: rgb(137, 137, 137); box-sizing: border-box;"><section style="border: 1px solid rgb(137, 137, 137); height: 30px; width: 30px; border-radius: 50%; margin-left: 50px; display: block; text-align: left; margin-top: -15px; box-sizing: border-box; background-color: rgb(255, 255, 255);"><section style="height: 24px; width: 24px; line-height: 24px; border-radius: 50%; margin: 2px auto 0px; text-align: center; color: rgb(255, 255, 255); box-sizing: border-box; background-color: rgb(233, 131, 109);"><p style="line-height:1.5em;">1</p></section></section><section style="display: block; padding: 0px 8px; line-height: 24px; font-size: 18px; margin-top: -30px; text-align: center; box-sizing: border-box;"><section style="display: inline-block; padding: 0px 8px; box-sizing: border-box; background-color: rgb(254, 254, 254);"><p><span style="font-family: 微软雅黑; font-size: 16px;"><span style="letter-spacing: 2px; line-height: 25.6px; white-space: pre-wrap;">连接数据库</span></span></p></section></section></section></section></section><p><br></p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="hljs coffeescript" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">import</span> pymysql<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2</span><span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 连接数据库</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>db = pymysql.connect(host=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘127.0.0.1’</span>,user=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘root’</span>,passwd=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘your password’</span>,db=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘news’</span>,port=<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3306</span>,charset=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘utf8’</span>)<br></code></pre></section><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">以上的参数是必填的，</p><ul class=" list-paddingleft-2" style="list-style-type: disc; margin: 0px; padding: 0px 0px 0px 30px;"><li><p style="letter-spacing: 2px;"><strong>host</strong>: 这个是ip地址，因为我这里是本地的，所以填127.0.0.1，也可以填localhost。</p></li><li><p style="letter-spacing: 2px;"><strong>user</strong>：用户名，如果你也是本地的，就填root好了</p></li><li><p style="letter-spacing: 2px;"><strong>passwd</strong>：这个是密码，填上你自己设的密码就可以了</p></li><li><p style="letter-spacing: 2px;"><strong>db</strong>：这个是数据库名，我这里选的是news数据库</p></li><li><p style="letter-spacing: 2px;"><strong>port</strong>：这个是端口，本地的一般都是3306</p></li><li><p style="letter-spacing: 2px;"><strong>charset</strong>：这个是编码方式，要和你数据库的编码方式一致，要不会连接失败</p></li></ul><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><strong>连接上了，怎么验证呢？这里我们可以选择查一条数据</strong></p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="hljs python" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 1</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">try</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 2</span> db = pymysql.connect(host=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘127.0.0.1’</span>,user=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘root’</span>,passwd=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘your password’</span>,db=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘news’</span>,port=<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3306</span>,charset=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘utf8’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 3</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 检验数据库是否连接成功</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 4</span> cursor = db.cursor()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 5</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 这个是执行sql语句，返回的是影响的条数</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 6</span> data = cursor.execute(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘SELECT <em> FROM <code>new</code>‘</em></span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 7</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 得到一条数据</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 8</span> one = cursor.fetchone()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 9</span> print(data)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">10</span> print(one)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">except</span> pymysql.Error <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">as</span> e:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span> print(e)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">13</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘操作数据库失败’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">14</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">finally</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">15</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 如果连接成功就要关闭数据库</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">16</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">if</span> db:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">17</span> db.close()<br></code></pre></section><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">代码解读：因为在连接数据库中，有时会发生连接失败等异常，所以这里就进行捕捉异常，这里的异常都是在 <strong>pymsql.Error </strong>里面。上面的代码看不懂也没关系，因为我接下来会说，如果运行后有结果证明连接成功。</p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><strong>在用完后，一定要记得关闭数据库连接，防止资源泄露问题。</strong></p><p style="letter-spacing: 2px;"><br></p><section class="editor"><section style="margin:20px auto 16px;text-align:center;"><section style="border-top-style: solid; border-top-width: 1px; border-top-color: rgb(137, 137, 137); box-sizing: border-box;"><section style="border: 1px solid rgb(137, 137, 137); height: 30px; width: 30px; border-radius: 50%; margin-left: 50px; display: block; text-align: left; margin-top: -15px; box-sizing: border-box; background-color: rgb(255, 255, 255);"><section style="height: 24px; width: 24px; line-height: 24px; border-radius: 50%; margin: 2px auto 0px; text-align: center; color: rgb(255, 255, 255); box-sizing: border-box; background-color: rgb(233, 131, 109);"><p style="line-height:1.5em;">2</p></section></section><section style="display: block; padding: 0px 8px; line-height: 24px; margin-top: -30px; text-align: center; box-sizing: border-box;"><section style="display: inline-block; padding: 0px 8px; box-sizing: border-box; background-color: rgb(254, 254, 254);"><p style=""><span style="font-family:微软雅黑">对数据进行查询</span></p></section></section></section></section></section><p><br></p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 1</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">import</span> pymysql<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 2</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">try</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 3</span> conn = pymysql.connect(host=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘127.0.0.1’</span>,user=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘root’</span>,passwd=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘password’</span>,db=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘news’</span>,charset=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘utf8’</span>,port=<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3306</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 4</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 这个是光标，用来操作数据库语句</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 5</span> cursor = conn.cursor()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 6</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 执行sql语句</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 7</span> cursor.execute(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘SELECT  FROM <code>new</code>‘</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 8</span> print(cursor.fetchone())<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 9</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 关闭光标</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">10</span> cursor.close()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">except</span> pymysql.Error <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">as</span> e:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span> print(e)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">13</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘操作数据库失败’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">14</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">finally</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">15</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">if</span> conn:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">16</span> conn.close()<br></code></pre></section><p style="letter-spacing: 2px;">代码解读：</p><ul class=" list-paddingleft-2" style="list-style-type: disc; margin: 0px; padding: 0px 0px 0px 30px;"><li><p style="letter-spacing: 2px;"><strong>cursor()</strong>:这个是光标，用来执行mysql语句的，用完后也是需要关闭的</p></li><li><p style="letter-spacing: 2px;"><strong>excute</strong><strong>()</strong>：这个是执行语句，执行参数的mysql语句</p></li><li><p style="letter-spacing: 2px;"><strong>fetchone()</strong>：这个是查看执行语句后的一条数据</p></li><li><p style="letter-spacing: 2px;"><strong>fetchall()</strong>：这个是查看所有数据</p></li></ul><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">在查询数据后，返回的是一整条数据，有没有可以按字典形式来查询的呢？来试试！</p><p style="letter-spacing: 2px;"><br></p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>print(cursor.fetchone()[<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘name’</span>])<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>Traceback (most recent call last):<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">4</span> File <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">“E:/anaconda/python_project/mysql_test/test2.py”</span>, line <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">8</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> &lt;module&gt;<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">5</span> print(cursor.fetchone()[<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘name’</span>])<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">6</span>TypeError: tuple indices must be integers <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">or</span> slices, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">not</span> str<br></code></pre></section><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">查了之后，编译器想都不想就给了我这个错误，说这是个元组，不能这样操作。</p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">虽然python没有提供，但是我们可以手动转成字典来查询啊</p><p style="letter-spacing: 2px;">cursor这里有个属性：<strong>description</strong>。获取的是数据库每个栏位情况，如下：</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>print(cursor.description)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2</span><span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 下面是结果</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>((<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘id’</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">False</span>), (<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘type’</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">253</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">5</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">5</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">False</span>), (<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘title’</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">253</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">50</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">50</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">False</span>), (<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘content’</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">253</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2000</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2000</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">False</span>), (<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘view_count’</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">False</span>), (<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘release_time’</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">19</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">19</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">False</span>), (<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘author’</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">253</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">20</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">20</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">True</span>), (<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘from’</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">253</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">20</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">20</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">True</span>), (<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘is_valibale’</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">False</span>)<br></code></pre></section><p><br></p><p>所以，我们利用这个属性手动生成字典</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span><span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 将一条数据转成字典方便查找</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2</span>new = dict(zip([x[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>] <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> cursor.description],[x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> cursor.fetchone()]))<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>print(new)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">4</span><span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 下面是结果</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">5</span>{<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘id’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘type’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘NBA’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘title’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘考辛斯跟腱撕裂赛季报销 浓眉詹皇发声祝福’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘content’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘他遭遇左脚跟腱撕裂，将缺席赛季剩下的比赛。这无疑对考辛斯和鹈鹕队都是一个重大的打击’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘view_count’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3560</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘release_time’</span>: datetime.datetime(<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2018</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">27</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">10</span>), <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘author’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘xiaoylin’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘from’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘腾讯体育’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘is_valibale’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>}<br></code></pre></section><p>这里利用zip函数和列表生成式来一行代码就生成成功了</p><p><br></p><p>用字典来查询，现在就可以了</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>print(new[<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘title’</span>])<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2</span><span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 下面是结果</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>考辛斯跟腱撕裂赛季报销 浓眉詹皇发声祝福<br></code></pre></section><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">但是，上面的只是一条数据的，如果是多条的呢？再按上面的方法就行不通了。这时就需要用到map函数了</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span><span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">new2dict</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">(new)</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">return</span> dict(zip([x[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>] <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> cursor.description],[x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> new]))<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>news_list = list(map(new2dict,cursor.fetchall()))<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">4</span>print(news_list)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">5</span><span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 下面是结果</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">6</span>[{<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘id’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘type’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘NBA’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘title’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘考辛斯跟腱撕裂赛季报销 浓眉詹皇发声祝福’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘content’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘他遭遇左脚跟腱撕裂，将缺席赛季剩下的比赛。这无疑对考辛斯和鹈鹕队都是一个重大的打击’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘view_count’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3560</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘release_time’</span>: datetime.datetime(<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2018</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">27</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">10</span>), <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘author’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘xiaoylin’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘from’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘腾讯体育’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘is_valibale’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>}, {<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘id’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘type’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘NBA’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘title’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘火箭挖21分大哈登得背锅 连遭浓眉大帽太尴尬’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘content’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘火箭在客场以113-115惜败于鹈鹕，4连胜终结。詹姆斯-哈登出战34分钟16投5中，其中三分球9投只有1中，罚球14罚12中，拿到23分、11助攻、5篮板但也有4次失误，其在场正负值为尴尬的-12分’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘view_count’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">7520</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘release_time’</span>: datetime.datetime(<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2018</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">27</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">5</span>), <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘author’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘youngcao’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘from’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘腾讯体育’</span>,<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘is_valibale’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>}, {<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘id’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">4</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘type’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘英超’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘title’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘足总杯-曼联4-0英乙球队晋级 桑神首秀造两球’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘content’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘2017-18赛季英格兰足总杯第4轮，曼联客场4比0击败英乙球队约维尔，顺利晋级下一轮。桑切斯迎来曼联首秀，并制造了两个入球’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘view_count’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">6560</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘release_time’</span>: datetime.datetime(<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2018</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">27</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">5</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">49</span>), <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘author’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘ricazhang’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘from’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘腾讯体育’</span>,<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘is_valibale’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>}, {<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘id’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">5</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘type’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘英超’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘title’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘这才配红魔7号！桑神首秀大腿级表演 回击嘘声质疑’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘content’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘在今天凌晨对阵约维尔的首秀也值得期待。虽然在登场的72分钟时间里没有进球，但送出1次助攻且有有6次威胁传球的数据还是十分亮眼’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘view_count’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2760</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘release_time’</span>: datetime.datetime(<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">2018</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">27</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">6</span>, <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">13</span>), <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘author’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘yaxinhao’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘from’</span>: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘腾讯体育’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘is_valibale’</span>: <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span>}]<br></code></pre></section><p style="letter-spacing: 2px;">这里很巧妙的利用了map函数，因为多条数据就可以进行迭代了，需要操作每条数据，这样就可以想到map函数</p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><strong>接下来我们再用面向对象的方法来用python进行查询数据库</strong></p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><br></p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 1</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">import</span> pymysql<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 2</span><span class="hljs-class" style="font-size: inherit; color: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">class</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">MysqlSearch</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">(object)</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 3</span> <span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">get_conn</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">(self)</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 4</span> <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘’’连接mysql数据库’’’</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 5</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">try</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 6</span> self.conn = pymysql.connect(host=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘127.0.0.1’</span>,user=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘root’</span>,passwd=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘your password’</span>,port=<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3306</span>,charset=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘utf8’</span>,db=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘news’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 7</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">except</span> pymysql.Error <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">as</span> e:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 8</span> print(e)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 9</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘连接数据库失败’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">10</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span> <span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">close_conn</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">(self)</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span> <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘’’关闭数据库’’’</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">13</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">try</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">14</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">if</span> self.conn:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">15</span> self.conn.close()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">16</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">except</span> pymysql.Error <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">as</span> e:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">17</span> print(e)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">18</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘关闭数据库失败’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">19</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">20</span> <span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">get_one</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">(self)</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">21</span> <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘’’查询一条数据’’’</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">22</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">try</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">23</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 这个是连接数据库</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">24</span> self.get_conn()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">25</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 查询语句</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">26</span> sql = <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘SELECT <em> FROM <code>new</code> WHERE <code>type</code>=%s’</em></span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">27</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 这个光标用来执行sql语句</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">28</span> cursor = self.conn.cursor()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">29</span> cursor.execute(sql,(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘英超’</span>,))<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">30</span> new = cursor.fetchone()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">31</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 返回一个字典，让用户可以按数据类型来获取数据</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">32</span> new_dict = dict(zip([x[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>] <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> cursor.description],new))<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">33</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 关闭cursor</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">34</span> cursor.close()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">35</span> self.close_conn()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">36</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">return</span> new_dict<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">37</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">except</span> AttributeError <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">as</span> e:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">38</span> print(e)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">39</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">return</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">40</span> <span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">get_all</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">(self)</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">41</span> <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘’’获取所有结果’’’</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">42</span> sql = <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘SELECT  FROM <code>new</code> ‘</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">43</span> self.get_conn()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">44</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">try</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">45</span> cursor = self.conn.cursor()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">46</span> cursor.execute(sql)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">47</span> news = cursor.fetchall()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">48</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 将数据转为字典，让用户根据键来查数据</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">49</span> news_list =list(map(<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">lambda</span> x:dict(zip([x[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>] <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> cursor.description],[d <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> d <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> x])),news))<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">50</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 这样也行,连续用两个列表生成式</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">51</span> news_list = [dict(zip([x[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>] <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> cursor.description],row)) <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> row <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> news]<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">52</span> cursor.close()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">53</span> self.close_conn()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">54</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">return</span> news_list<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">55</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">except</span> AttributeError <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">as</span> e:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">56</span> print(e)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">57</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">return</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">58</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">59</span><span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">main</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">()</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">60</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 获取一条数据</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">61</span> news = MysqlSearch()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">62</span> new = news.get_one()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">63</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">if</span> new:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">64</span> print(new)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">65</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">else</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">66</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘操作失败’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">67</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">68</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 获取多条数据</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">69</span> news = MysqlSearch()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">70</span> rest = news.get_all()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">71</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">if</span> rest:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">72</span> print(rest)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">73</span> print(rest[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">7</span>][<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘type’</span>],rest[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">7</span>][<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘title’</span>])<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">74</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘类型：{0},标题：{1}’</span>.format(rest[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span>][<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘type’</span>],rest[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span>][<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘title’</span>]))<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">75</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> row <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> rest:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">76</span> print(row)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">77</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">else</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">78</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘没有获取到数据’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">79</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">80</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">if</span> <strong>name</strong> == <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘<strong>main</strong>‘</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">81</span> main()<br></code></pre></section><p style="letter-spacing: 2px;">这样就可以通过实例的方法来进行查询数据库了</p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">我们还可以根据页数来进行查询指定的数据数</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 1</span> <span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">get_more</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">(self,page,page_size)</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 2</span> <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘’’查多少页的多少条数据’’’</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 3</span> offset = (page<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">-1</span>)<em>page_size<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 4</span> sql = <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘SELECT </span></em> FROM <code>new</code> LIMIT %s,%s’<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 5</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">try</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 6</span> self.get_conn()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 7</span> cursor = self.conn.cursor()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 8</span> cursor.execute(sql,(offset,page_size,))<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 9</span> news = [dict(zip([x[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span>] <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> cursor.description],new)) <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> new <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> cursor.fetchall()]<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">10</span> cursor.close()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span> self.close_conn()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">return</span> news<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">13</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">except</span> AttributeError <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">as</span> e:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">14</span> print(e)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">15</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">return</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">None</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">16</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">17</span><span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">main</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">()</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">18</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">#获取某页的数据</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">19</span> news = MysqlSearch()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">20</span> new = news.get_more(<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">3</span>,<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">5</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">21</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">if</span> new:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">22</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">for</span> row <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">in</span> new:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">23</span> print(row)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">24</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">else</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">25</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘获取数据失败’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">26</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">27</span><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">if</span> <strong>name</strong> == <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘<strong>main</strong>‘</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">28</span> main()<br></code></pre></section><p style="letter-spacing: 2px;">利用的是mysql的<strong><span style="line-height: inherit;">limit</span></strong><span style="line-height: inherit;">关键字，还有其他的，比如进行排序分组的感兴趣的可以自己尝试下</span></p><p style="letter-spacing: 2px;"><span style="line-height: inherit;"><br></span></p><p style="letter-spacing: 2px;"><span style="line-height: inherit;"></span></p><section class="editor"><section style="margin:20px auto 16px;text-align:center;"><section style="border-top-style: solid; border-top-width: 1px; border-top-color: rgb(137, 137, 137); box-sizing: border-box;"><section style="border: 1px solid rgb(137, 137, 137); height: 30px; width: 30px; border-radius: 50%; margin-left: 50px; display: block; text-align: left; margin-top: -15px; box-sizing: border-box; background-color: rgb(255, 255, 255);"><section style="height: 24px; width: 24px; line-height: 24px; border-radius: 50%; margin: 2px auto 0px; text-align: center; color: rgb(255, 255, 255); box-sizing: border-box; background-color: rgb(233, 131, 109);"><p style="line-height:1.5em;">3</p></section></section><section style="display: block; padding: 0px 8px; line-height: 24px; font-size: 18px; margin-top: -30px; text-align: center; box-sizing: border-box;"><section style="display: inline-block; padding: 0px 8px; box-sizing: border-box; background-color: rgb(254, 254, 254);"><p>增加数据到数据库</p></section></section></section></section></section><p style="letter-spacing: 2px;"><span style="line-height: inherit;"></span><br></p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(62, 62, 62); line-height: 1.6; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><pre style="font-size: inherit; color: inherit; line-height: inherit; margin-top: 0px; margin-bottom: 0px; padding: 0px;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); padding: 0.5em; display: block !important; word-wrap: normal !important; word-break: normal !important; white-space: pre !important; overflow: auto !important; background: rgb(40, 43, 46);"><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 1</span> <span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">add_one</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">(self)</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 2</span> sql = <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘INSERT INTO <code>new</code>(<code>title</code>,<code>content</code>,<code>type</code>,<code>view_count</code>,<code>release_time</code>) VALUE(%s,%s,%s,%s,%s)’</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 3</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">try</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 4</span> self.get_conn()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 5</span> cursor = self.conn.cursor()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 6</span> cursor.execute(sql, (<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘title’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘content’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘type’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘1111’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘2018-02-01’</span>))<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 7</span> cursor.execute(sql, (<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘标题’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘内容’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘类型’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘0000’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘2018-02-01’</span>))<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 8</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 一定需要提交事务，要不不会显示，只会占位在数据库</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"> 9</span> self.conn.commit()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">10</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">return</span> <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">1</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">11</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">except</span> AttributeError <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">as</span> e:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">12</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘Error:’</span>, e)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">13</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">return</span> <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">14</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">except</span> TypeError <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">as</span> e:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">15</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘Error:’</span>, e)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">16</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 发生错误还提交就是把执行正确的语句提交上去</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">17</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># self.conn.commit()</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">18</span> <span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: rgb(128, 128, 128); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"># 下面这个方法是发生异常就全部不能提交,但语句执行成功的就会占位</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">19</span> self.conn.rollback()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">20</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">return</span> <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">0</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">21</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">finally</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">22</span> cursor.close()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">23</span> self.close_conn()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">24</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">25</span> <span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">main</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">()</span>:</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">26</span> news = OperateSQL()<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">27</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">if</span> news.add_one():<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">28</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘增加数据成功’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">29</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">else</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">30</span> print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘发生异常，请检查！！！’</span>)<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">31</span><br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">32</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">if</span> <strong>name</strong> == <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">‘<strong>main</strong>‘</span>:<br><span class="linenum hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); padding-right: 20px; word-wrap: inherit !important; word-break: inherit !important; white-space: inherit !important;">33</span> main()<br></code></pre></section><p style="letter-spacing: 2px;">因为是增加数据，所以需要提交事务，这就需要用到<strong>cursor.commit()</strong>来进行提交，在增加数据后，如果不提交，数据库就不会显示。</p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">还有修改数据和删除数据就不贴出来了，只是把上面的sql变量的语句改成修改或者删除的语句就可以了，如果你还不会，建议练习下</p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><br></p><section class="editor"><p><strong>END</strong></p></section><p style="letter-spacing: 2px;">代码我放在github了，网站为<a href="https://github.com/SergioJune/gongzhonghao_code，有兴趣的可以去看看，如果可以的话希望给个star哈！" _src="https://github.com/SergioJune/gongzhonghao_code，有兴趣的可以去看看，如果可以的话希望给个star哈！" target="_blank" rel="noopener">https://github.com/SergioJune/gongzhonghao_code，有兴趣的可以去看看，如果可以的话希望给个star哈！</a></p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;">这篇文章只适合入门的，如果需要学习更多的话可以去查看pymysql的文档<a href="http://pymysql.readthedocs.io/en/latest/" target="_blank" rel="noopener">http://pymysql.readthedocs.io/en/latest/</a> 。</p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px; text-align: center;"><img style="border-radius: 5px; border: 1px dashed rgb(168, 164, 171); box-shadow: rgba(0, 0, 0, 0.329412) 6px 6px 5px 0px; margin-bottom: 1.4px; visibility: visible !important; width: 111.297px !important;" src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802109804.png" height="auto" border="0" alt="1802109804.png" _src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802109804.png"></p><p style="letter-spacing: 2px;"><br></p><p style="letter-spacing: 2px; text-align: center;"><span style="font-size: 14px;">日常学python</span></p><p style="letter-spacing: 2px;"><span style="font-size: 14px;"><br></span></p><p style="letter-spacing: 2px; text-align: center;"><span style="font-size: 14px;">一个专注于python的公众号</span></p></div><p class="readmore"><a href="/2018/08/07/学习用python操作mysql/">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/07/我爬取了37000条球迷评论，知道了这场比赛的重要信息/">我爬取了37000条球迷评论，知道了这场比赛的重要信息</a></h2><div class="post-meta"><p><span class="date">2018-08-07</span><span><a href="/categories/python/" class="category">python</a></span></p></div><div class="post-content"><section><h1 style="font-weight: bold; font-size: 16px; line-height: 1.6em;"></h1><section class="mpa-template" data-mpa-template-id="1198548" data-mpa-color="null" data-mpa-category="fav" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><section style="word-break: normal !important;"><p style="margin-right: auto; margin-left: auto; padding-right: 5px; padding-left: 5px; max-width: 600px; word-wrap: normal; border-width: 1px; border-style: solid; border-color: rgb(95, 170, 255); font-family: 微软雅黑; font-size: 12px; border-radius: 2em; text-align: center; letter-spacing: 2px; word-break: normal !important;"><span style="color: rgb(255, 0, 0); word-break: normal !important;">这是日常学python的第18篇原创文章</span><br style="word-break: normal !important;"></p></section></section><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><strong style="word-break: normal !important;">这次用python爬虫爬点好玩的东西</strong></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">这两天看恰好有nba决赛，是球迷的你肯定不会错过的，更何况今年的西部决赛是火箭对战勇士，今年的火箭是很强的，因为没到关键时候总会有人站出来。当然，勇士也是挺强的，毕竟不能小看库里杜兰特等四大巨头。</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">东部的决赛我就不太知道了，一直以为是凯尔特人会苦战骑士，谁知道缺了两大主力的凯尔特人还是很强，而且还打了骑士2：0，看来这次的骑士会是凶多吉少了，不知道凯尔特人会不会成功复仇，让我们拭目以待吧！</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">有直播就肯定有评论，所以我想爬取下球迷评论，看看他们都在聊什么！</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><strong style="word-break: normal !important;"><span style="font-size: 20px; word-break: normal !important;">准备工作</span></strong></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">需要用到的库：</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">&nbsp; &nbsp; requests：用于网络请求</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">&nbsp;&nbsp;&nbsp;&nbsp;jieba：用于分词<br style="word-break: normal !important;"></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">&nbsp;&nbsp;&nbsp;&nbsp;wordcloud：制作词云图<br style="word-break: normal !important;"></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">&nbsp;&nbsp;&nbsp;&nbsp;numpy：制作背景图片<br style="word-break: normal !important;"></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">词云背景图片：</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-copyright="0" data-cropselx1="0" data-cropselx2="558" data-cropsely1="0" data-cropsely2="321" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbU6xXyL3fiaYsJXoKbTqsicicarpTVrAdRiaGdlxiazzOQNWicDvuo3EOQ8PFA/640" style="height: 625px; width: 558px; word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbU6xXyL3fiaYsJXoKbTqsicicarpTVrAdRiaGdlxiazzOQNWicDvuo3EOQ8PFA/640"></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">上面的库都是可以直接用pip进行下载的，但是wordcloud会报错，报错如下：</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-copyright="0" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbURS7Iyc18YMjJZgHyFTnoI8v7DUFD2UvOvvQj1R64spx1icfn4rgqLbw/640" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbURS7Iyc18YMjJZgHyFTnoI8v7DUFD2UvOvvQj1R64spx1icfn4rgqLbw/640"></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">我们需要去官网下载whl文件进行手动安装</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">官网：<a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/" target="_blank" rel="noopener">https://www.lfd.uci.edu/~gohlke/pythonlibs/</a></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">然后找到对应自己安装的python版本进行下载</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUbCpXibED3H4WWdpuGRNNa5HWmHE5wGV7Z6PWXwxqMCHiau3QDO5ic7r5w/640" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUbCpXibED3H4WWdpuGRNNa5HWmHE5wGV7Z6PWXwxqMCHiau3QDO5ic7r5w/640"></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">最后在命令行下安装即可</p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" class="mpa-template" mpa-preserve="t" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; background-image: none; background-color: initial; word-break: normal !important;">pip install “文件路径+whl文件名”<br></pre></section><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><strong style="word-break: normal !important;">接下来寻找目标网页</strong></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">文字直播地址：<a href="https://www.zhibo8.cc/zhibo/nba/2018/0517123898.htm?redirect=zhibo" target="_blank" rel="noopener">https://www.zhibo8.cc/zhibo/nba/2018/0517123898.htm?redirect=zhibo</a></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">在这个网页通过抓包（按下f12）课知道下面这个链接是返回评论信息，而且是个json</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUMac5KzIeNF3FlabmBKKoDDs9cSNdzQGWrMjibjVqbJTIkzyNW1uvSjQ/640" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUMac5KzIeNF3FlabmBKKoDDs9cSNdzQGWrMjibjVqbJTIkzyNW1uvSjQ/640"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUaBxv3LdlfjPicjPmaEEicXGmx4XUicAVVHZficjjeRRmjOlPjptVCuGYag/640" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUaBxv3LdlfjPicjPmaEEicXGmx4XUicAVVHZficjjeRRmjOlPjptVCuGYag/640"></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">链接为：<span style="color: rgb(34, 34, 34); word-break: normal !important;"><a href="https://cache.zhibo8.cc/json/" target="_blank" rel="noopener">https://cache.zhibo8.cc/json/</a><strong style="word-break: normal !important;">2018/nba/0517123898_384</strong>.htm?key=0.6512348313080727</span></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">通过多次分析知道上面加粗的是直播间的信息，后面的下划线之后的是评论的页数，最后的key参数是个随机数，带不带上进行请求都没有关系</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">用代码来获取评论信息</p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" class="mpa-template" mpa-preserve="t" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; background-image: none; background-color: initial; word-break: normal !important;"><code class="hljs-sublime" style="margin-right: 0.15em; margin-left: 0.15em; padding: 6px; border-radius: 4px; font-size: 0.85em; background: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; white-space: nowrap; word-break: normal !important;"><span class="hljs-sublime-function" style="background: rgba(0, 0, 0, 0); display: inline; width: 185px; text-decoration-style: solid; text-decoration-color: rgb(248, 248, 242); word-break: normal !important;"><span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">def</span>&nbsp;<span class="hljs-sublime-title" style="color: rgb(166, 226, 46); background: rgba(0, 0, 0, 0); display: inline; width: 66px; text-decoration-style: solid; text-decoration-color: rgb(166, 226, 46); word-break: normal !important;"><strong>get_json</strong></span><span class="hljs-sublime-params" style="background: rgba(0, 0, 0, 0); display: inline; width: 86px; text-decoration-style: solid; text-decoration-color: rgb(248, 248, 242); word-break: normal !important;">(self, index)</span>:</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;url =&nbsp;<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 528px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">‘<a href="https://cache.zhibo8.cc/json/2018/nba/0517123898_%d.htm?key=0.1355540028791382&#39;" target="_blank" rel="noopener">https://cache.zhibo8.cc/json/2018/nba/0517123898_%d.htm?key=0.1355540028791382&#39;</a></span>&nbsp;% index<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;response = requests.get(url)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">if</span>&nbsp;response.status_code ==&nbsp;<span class="hljs-sublime-number" style="color: rgb(174, 129, 255); background: rgba(0, 0, 0, 0); display: inline; width: 19px; text-decoration-style: solid; text-decoration-color: rgb(174, 129, 255); word-break: normal !important;">200</span>:<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">for</span>&nbsp;item&nbsp;<span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 14px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">in</span>&nbsp;response.json():<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-sublime-comment" style="color: rgb(117, 113, 94); background: rgba(0, 0, 0, 0); display: inline; width: 62px; text-decoration-style: solid; text-decoration-color: rgb(117, 113, 94); word-break: normal !important;"># 写入文件</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.write_file(item[<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 59px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">‘content’</span>])<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.num +=&nbsp;<span class="hljs-sublime-number" style="color: rgb(174, 129, 255); background: rgba(0, 0, 0, 0); display: inline; width: 6px; text-decoration-style: solid; text-decoration-color: rgb(174, 129, 255); word-break: normal !important;">1</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 40px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">return</span>&nbsp;<span class="hljs-sublime-number" style="color: rgb(174, 129, 255); background: rgba(0, 0, 0, 0); display: inline; width: 7px; text-decoration-style: solid; text-decoration-color: rgb(174, 129, 255); word-break: normal !important;">1</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">else</span>:<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 40px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">return</span>&nbsp;<span class="hljs-sublime-number" style="color: rgb(174, 129, 255); background: rgba(0, 0, 0, 0); display: inline; width: 7px; text-decoration-style: solid; text-decoration-color: rgb(174, 129, 255); word-break: normal !important;">0</span></code></pre></section><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">评论信息有了，接着弄张词云图</p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" class="mpa-template" mpa-preserve="t" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; background-image: none; background-color: initial; word-break: normal !important;"><code class="hljs-sublime" style="margin-right: 0.15em; margin-left: 0.15em; padding: 6px; border-radius: 4px; font-size: 0.85em; background: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; white-space: nowrap; word-break: normal !important;"><span class="hljs-sublime-function" style="background: rgba(0, 0, 0, 0); display: inline; width: 171px; text-decoration-style: solid; text-decoration-color: rgb(248, 248, 242); word-break: normal !important;"><span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">def</span>&nbsp;<span class="hljs-sublime-title" style="color: rgb(166, 226, 46); background: rgba(0, 0, 0, 0); display: inline; width: 99px; text-decoration-style: solid; text-decoration-color: rgb(166, 226, 46); word-break: normal !important;"><strong>get_wordcloud</strong></span><span class="hljs-sublime-params" style="background: rgba(0, 0, 0, 0); display: inline; width: 40px; text-decoration-style: solid; text-decoration-color: rgb(248, 248, 242); word-break: normal !important;">(self)</span>:</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">with</span>&nbsp;open(<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 92px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">‘comments.txt’</span>,&nbsp;<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">‘r’</span>, encoding=<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 47px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">‘utf-8’</span>)&nbsp;<span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">as</span>&nbsp;comments:<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text = comments.read() &nbsp;<span class="hljs-sublime-comment" style="color: rgb(117, 113, 94); background: rgba(0, 0, 0, 0); display: inline; width: 62px; text-decoration-style: solid; text-decoration-color: rgb(117, 113, 94); word-break: normal !important;"># 加载数据</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;words =&nbsp;<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">‘ ‘</span>.join(jieba.cut(text, cut_all=<span class="hljs-sublime-keyword" style="color: rgb(249, 38, 114); background: rgba(0, 0, 0, 0); display: inline; width: 27px; text-decoration-style: solid; text-decoration-color: rgb(249, 38, 114); word-break: normal !important;">True</span>)) &nbsp;<span class="hljs-sublime-comment" style="color: rgb(117, 113, 94); background: rgba(0, 0, 0, 0); display: inline; width: 121px; text-decoration-style: solid; text-decoration-color: rgb(117, 113, 94); word-break: normal !important;"># 采用结巴全分词模式</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;image = np.array(Image.open(<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 46px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">‘1.jpg’</span>)) &nbsp;<span class="hljs-sublime-comment" style="color: rgb(117, 113, 94); background: rgba(0, 0, 0, 0); display: inline; width: 61px; text-decoration-style: solid; text-decoration-color: rgb(117, 113, 94); word-break: normal !important;"># 背景图片</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-sublime-comment" style="color: rgb(117, 113, 94); background: rgba(0, 0, 0, 0); display: inline; width: 73px; text-decoration-style: solid; text-decoration-color: rgb(117, 113, 94); word-break: normal !important;"># 初始化词云</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wc = WordCloud(font_path=<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 198px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">r’C:\Windows\Fonts\simkai.ttf’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background_color=<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 46px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">‘white’</span>, mask=image,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max_font_size=<span class="hljs-sublime-number" style="color: rgb(174, 129, 255); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(174, 129, 255); word-break: normal !important;">100</span>, max_words=<span class="hljs-sublime-number" style="color: rgb(174, 129, 255); background: rgba(0, 0, 0, 0); display: inline; width: 27px; text-decoration-style: solid; text-decoration-color: rgb(174, 129, 255); word-break: normal !important;">2000</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wc.generate(words) &nbsp;<span class="hljs-sublime-comment" style="color: rgb(117, 113, 94); background: rgba(0, 0, 0, 0); display: inline; width: 61px; text-decoration-style: solid; text-decoration-color: rgb(117, 113, 94); word-break: normal !important;"># 生成词云</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wc.to_file(<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 59px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">‘img.png’</span>) &nbsp;<span class="hljs-sublime-comment" style="color: rgb(117, 113, 94); background: rgba(0, 0, 0, 0); display: inline; width: 61px; text-decoration-style: solid; text-decoration-color: rgb(117, 113, 94); word-break: normal !important;"># 生成图片</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;image_file = Image.open(<span class="hljs-sublime-string" style="color: rgb(230, 219, 116); background: rgba(0, 0, 0, 0); display: inline; width: 60px; text-decoration-style: solid; text-decoration-color: rgb(230, 219, 116); word-break: normal !important;">‘img.png’</span>) &nbsp;<span class="hljs-sublime-comment" style="color: rgb(117, 113, 94); background: rgba(0, 0, 0, 0); display: inline; width: 62px; text-decoration-style: solid; text-decoration-color: rgb(117, 113, 94); word-break: normal !important;"># 打开图片</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;image_file.show()</code></pre></section><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">好了，代码完成，看下效果：</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-copyright="0" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUicbxJ0gFljMa2bKLJRic6zib2wFglvAyDxuXlWnhhnemDtdsN0icK1eIQg/640" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUicbxJ0gFljMa2bKLJRic6zib2wFglvAyDxuXlWnhhnemDtdsN0icK1eIQg/640"></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">利用词云图一眼就可以看出球迷都在评论什么了，因为我爬取的是火箭主场对战勇士的第二场比赛，肯定讨论最多的就是勇士火箭了，紧接的就是杜兰特了，死亡之神，这场的杜兰特超神拿了38分还是输给了火箭，自然而然就是讨论他最多了。还有就是这场站出来的塔克，三分6中5，还破了个人季后赛的最高得分，讨论他也是很正常的事。还有一个很显眼的就是第三节，很多人都认为勇士是“勇三疯”，以为这场比赛勇士会在第三节爆发吧？其实这赛季的火箭第三节也是很强的，并不比勇士弱。</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">完整代码已经上传到我的github上了，如果需要的话可以自行查看，如果觉得程序不错的话希望可以给个star哈！</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">github：<a href="https://github.com/SergioJune/gongzhonghao_code" target="_blank" rel="noopener">https://github.com/SergioJune/gongzhonghao_code</a></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><span style="font-size: 20px; word-break: normal !important;"><strong style="word-break: normal !important;">写在最后</strong></span></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">如果这篇文章对你用的话，希望不要吝啬你的点赞哈！点赞和转发就是对我的最大支持，这样才有动力输出质量高的原创文章。</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">「球迷的话点个赞？我看看有多少个是球迷」</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">推荐文章：</p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;">&lt;a href=”<a href="http://mp.weixin.qq.com/s" target="_blank" rel="noopener">http://mp.weixin.qq.com/s</a>?biz=MzU0NzY0NzQyNw==&amp;mid=2247483774&amp;idx=1&amp;sn=769c06f2cf532b645d9cb9ba63b52b81&amp;chksm=fb4a7bd2cc3df2c47851c244db40b5cddccf2e21381d7742e39b9db2bdee0f12b83f870814bf&amp;scene=21#wechat_redirect” target=”_blank” _href=”<a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483774&amp;idx=1&amp;sn=769c06f2cf532b645d9cb9ba63b52b81&amp;chksm=fb4a7bd2cc3df2c47851c244db40b5cddccf2e21381d7742e39b9db2bdee0f12b83f870814bf&amp;scene=21#wechat_redirect&quot;" target="_blank" rel="noopener">http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483774&amp;idx=1&amp;sn=769c06f2cf532b645d9cb9ba63b52b81&amp;chksm=fb4a7bd2cc3df2c47851c244db40b5cddccf2e21381d7742e39b9db2bdee0f12b83f870814bf&amp;scene=21#wechat_redirect&quot;</a> style=”word-break: normal !important;”&gt;使用requests+BeautifulSoup的简单爬虫练习<br style="word-break: normal !important;"></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483720&amp;idx=1&amp;sn=4567a228e1bcca2dcb4c23f0feac39b3&amp;chksm=fb4a7be4cc3df2f234c5b7102f107e72df42a24575dd5d735fb203dddf02ca6e2d3b2b41ce28&amp;scene=21#wechat_redirect" target="_blank" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483720&amp;idx=1&amp;sn=4567a228e1bcca2dcb4c23f0feac39b3&amp;chksm=fb4a7be4cc3df2f234c5b7102f107e72df42a24575dd5d735fb203dddf02ca6e2d3b2b41ce28&amp;scene=21#wechat_redirect" style="word-break: normal !important;">python爬虫常用库之requests详解</a><br style="word-break: normal !important;"></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="margin-right: 2em; margin-left: 2em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1.5px; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; text-align: center; word-break: normal !important;"><img data-copyright="0" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_jpg/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUibICOVW7ziao5o8nCHYeqSJXIC0TKxqQgHibtaBKl4waRIZVPD4DaE8cg/640" style="width: 145.078px; word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_jpg/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUibICOVW7ziao5o8nCHYeqSJXIC0TKxqQgHibtaBKl4waRIZVPD4DaE8cg/640"></p><p style="padding-right: 5px; padding-left: 5px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; color: rgb(51, 51, 51); text-align: center; word-break: normal !important;"><span style="font-size: 14px; word-break: normal !important;">日常学python</span></p><p style="padding-right: 5px; padding-left: 5px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; color: rgb(51, 51, 51); text-align: center; word-break: normal !important;"><span style="font-size: 14px; word-break: normal !important;">代码不止bug，还有美和乐趣</span></p><p><br></p>​</section></div><p class="readmore"><a href="/2018/08/07/我爬取了37000条球迷评论，知道了这场比赛的重要信息/">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/07/谈谈如何抓取ajax动态网站/">谈谈如何抓取ajax动态网站</a></h2><div class="post-meta"><p><span class="date">2018-08-07</span><span><a href="/categories/python/" class="category">python</a></span></p></div><div class="post-content"><p data-mpa-powered-by="yiban.io" style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">什么是ajax呢，简单来说，就是加载一个网页完毕之后，有些信息你你还是看不到，需要你点击某个按钮才能看到数据，或者有些网页是有很多页数据的，而你在点击下一页的时候，网页的url地址没有变化，但是内容变了，这些都可以说是ajax。如果还听不懂，我给你看看百度百科的解释吧，下面就是。</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"></p><blockquote style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><p style="word-break: normal !important;">Ajax 即“Asynchronous&nbsp;Javascript&nbsp;And&nbsp;XML”（异步 JavaScript 和 XML），是指一种创建交互式网页应用的网页开发技术。</p><p style="word-break: normal !important;">Ajax = 异步&nbsp;JavaScript&nbsp;和&nbsp;XML（标准通用标记语言的子集）。</p><p style="word-break: normal !important;">Ajax 是一种用于创建快速动态网页的技术。</p><p style="word-break: normal !important;">Ajax 是一种在无需重新加载整个网页的情况下，能够更新部分网页的技术。&nbsp;[</p><p style="word-break: normal !important;">通过在后台与服务器进行少量数据交换，Ajax 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</p><p style="word-break: normal !important;">传统的网页（不使用 Ajax）如果需要更新内容，必须重载整个网页页面。</p></blockquote><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">下面说下例子，我抓取过的ajax网页最难的就是网易云音乐的评论，感兴趣的可以看看<a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483673&amp;idx=1&amp;sn=6c89eb9474d2076afb6405a9fd972e4f&amp;chksm=fb4a7bb5cc3df2a3ca3235ebe8bddf635839e5fd5a1b998b08dae521d449ee4388ae6ed7bbda&amp;scene=21#wechat_redirect" target="_blank" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483673&amp;idx=1&amp;sn=6c89eb9474d2076afb6405a9fd972e4f&amp;chksm=fb4a7bb5cc3df2a3ca3235ebe8bddf635839e5fd5a1b998b08dae521d449ee4388ae6ed7bbda&amp;scene=21#wechat_redirect" style="word-break: normal !important;">利用python爬取网易云音乐，并把数据存入mysql</a></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">这里的评论就是ajax加载的，其他的那个抓今日头条妹子图片的也算是ajax加载的，只不过我把它简单化了。还有很多，就不说了，说下我今天要说的ajax网站吧！</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><span style="font-size: 18px; word-break: normal !important;"><strong style="word-break: normal !important;"><a href="http://www.kfc.com.cn/kfccda/storelist/index.aspx" target="_blank" rel="noopener">http://www.kfc.com.cn/kfccda/storelist/index.aspx</a></strong></span></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><span style="font-size: 16px; word-break: normal !important;">这个是肯德基的门面信息</span></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWibUCcSJxOmJHdMtqcKAJ9KOo6GA2uibDZJLTTkia8yelFORKAPu2xq7VtMa9LdgljuWLMt6VJUrk2ww/640" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWibUCcSJxOmJHdMtqcKAJ9KOo6GA2uibDZJLTTkia8yelFORKAPu2xq7VtMa9LdgljuWLMt6VJUrk2ww/640"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><span style="font-size: 16px; word-break: normal !important;">这里有很多页数据，每一页的数据都是ajax加载的。如果你直接用python请求上面那个url的话，估计什么数据都拿不到，不信的话可以试试哈。这时候，我们照常打开开发者工具。先把所有请求清楚，把持续日志打上勾，然后点击下一页，你会看到</span></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWibUCcSJxOmJHdMtqcKAJ9KO8ujDSZnYNN9ziaFKfU6sY8sfmtC8675bgRCIFiavOl5JNlVsFib8I4PRA/640" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWibUCcSJxOmJHdMtqcKAJ9KO8ujDSZnYNN9ziaFKfU6sY8sfmtC8675bgRCIFiavOl5JNlVsFib8I4PRA/640"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><span style="font-size: 16px; word-break: normal !important;"></span>上面那个请求就是ajax请求的网页，里面就会有我们需要的数据，我们看看是什么样的请求</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWibUCcSJxOmJHdMtqcKAJ9KO4EvNAuDAp1aeOgpEkQiccUpGH4LULXLibgzqvjNxCZ4PxR0NFMaSjmqw/640" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWibUCcSJxOmJHdMtqcKAJ9KO4EvNAuDAp1aeOgpEkQiccUpGH4LULXLibgzqvjNxCZ4PxR0NFMaSjmqw/640"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">是个post请求，请求成功状态码为200，请求url上面也有了，下面的from data就是我们需要post的数据，很容易就可以猜到pageIndex就是页数，所以我们可以改变这个值来进行翻页。</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">这个网页就分析完了，这样就是解决ajax动态网页了，是不是觉得很简单，其实不是的，只是这个网页比较简单的，因为表单(from data)的数据并没有进行加密，如果进行加密的话估计你的找js文件看看参数是怎样加密的了，这就是我之前写的网易云音乐评论的爬取。看这些混淆的js寻找加密方法的话有时会让你很头痛，所以经常有人会选择用selenium这些来进行爬取，但是用这些会使爬虫的性能降低，所以这个方法在工作里是不允许的。所以必须学会怎样应对这些ajax。</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">贴下代码</p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" class="mpa-template" mpa-preserve="t" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; background-image: none; background-color: initial; word-break: normal !important;"><code class="hljs-default" style="margin-right: 0.15em; margin-left: 0.15em; padding: 6px; border-radius: 4px; font-size: 0.85em; background: rgb(40, 44, 52); color: rgb(171, 178, 191); display: block; overflow-x: auto; white-space: nowrap; word-break: normal !important;"><span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 39px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">import</span>&nbsp;requests<br style="word-break: normal !important;">page =&nbsp;<span class="hljs-default-number" style="color: rgb(209, 154, 102); background: rgba(0, 0, 0, 0); display: inline; width: 7px; text-decoration-style: solid; text-decoration-color: rgb(209, 154, 102); word-break: normal !important;">1</span><br style="word-break: normal !important;"><span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">while</span>&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 27px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">True</span>:<br style="word-break: normal !important;">&nbsp; &nbsp;url =&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 409px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<a href="http://www.kfc.com.cn/kfccda/ashx/GetStoreList.ashx?op=cname&#39;" target="_blank" rel="noopener">http://www.kfc.com.cn/kfccda/ashx/GetStoreList.ashx?op=cname&#39;</a></span><br style="word-break: normal !important;">&nbsp; &nbsp;data = {<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 46px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘cname’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 38px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘广州’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘pid’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 73px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘pageIndex’</span>: page,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 66px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘pageSize’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 27px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘10’</span><br style="word-break: normal !important;">&nbsp; &nbsp;}<br style="word-break: normal !important;">&nbsp; &nbsp;response = requests.post(url, data=data)<br style="word-break: normal !important;">&nbsp; &nbsp;print(response.json())<br style="word-break: normal !important;">&nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">if</span>&nbsp;response.json().get(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 53px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘Table1’</span>,&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>):<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;page +=&nbsp;<span class="hljs-default-number" style="color: rgb(209, 154, 102); background: rgba(0, 0, 0, 0); display: inline; width: 7px; text-decoration-style: solid; text-decoration-color: rgb(209, 154, 102); word-break: normal !important;">1</span><br style="word-break: normal !important;">&nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 27px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">else</span>:<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">break</span></code></pre></section><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">可以看到去掉from data，不用十行代码就可以把数据都爬下来了，所以说这个网站适合练手，大家可以去试试。</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><span style="font-size: 20px; word-break: normal !important;"><strong style="word-break: normal !important;">写在最后</strong></span></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">下篇文章我会写下复杂点的ajax请求，这个网站</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><strong style="word-break: normal !important;"><a href="http://drugs.dxy.cn/" target="_blank" rel="noopener">http://drugs.dxy.cn/</a><span style="font-size: 20px; word-break: normal !important;"><br style="word-break: normal !important;"></span></strong></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">不知道有多少人想看，想看的话点个赞吧！或者你可以自己先试试哈</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">推荐文章</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483804&amp;idx=1&amp;sn=899c55927facc551c23712921fc631ca&amp;chksm=fb4a7b30cc3df2268d2be3a93ee53839c419dc7427aecbebcbf678c57cefae27167c3be7630b&amp;scene=21#wechat_redirect" target="_blank" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483804&amp;idx=1&amp;sn=899c55927facc551c23712921fc631ca&amp;chksm=fb4a7b30cc3df2268d2be3a93ee53839c419dc7427aecbebcbf678c57cefae27167c3be7630b&amp;scene=21#wechat_redirect" style="word-break: normal !important;">如何爬取asp动态网页？搞定可恶的动态参数，这一文告诉你！</a></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483673&amp;idx=1&amp;sn=6c89eb9474d2076afb6405a9fd972e4f&amp;chksm=fb4a7bb5cc3df2a3ca3235ebe8bddf635839e5fd5a1b998b08dae521d449ee4388ae6ed7bbda&amp;scene=21#wechat_redirect" target="_blank" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483673&amp;idx=1&amp;sn=6c89eb9474d2076afb6405a9fd972e4f&amp;chksm=fb4a7bb5cc3df2a3ca3235ebe8bddf635839e5fd5a1b998b08dae521d449ee4388ae6ed7bbda&amp;scene=21#wechat_redirect" style="word-break: normal !important;">利用python爬取网易云音乐，并把数据存入mysql</a><br style="word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; color: rgb(51, 51, 51); word-break: normal !important; text-align: center;"><img data-copyright="0" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_jpg/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUibICOVW7ziao5o8nCHYeqSJXIC0TKxqQgHibtaBKl4waRIZVPD4DaE8cg/640" width="26%" style="word-break: normal !important; visibility: visible !important; width: 173.672px !important;" _src="https://mmbiz.qpic.cn/mmbiz_jpg/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUibICOVW7ziao5o8nCHYeqSJXIC0TKxqQgHibtaBKl4waRIZVPD4DaE8cg/640"></p><p style="padding-right: 5px; padding-left: 5px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; color: rgb(51, 51, 51); word-break: normal !important; text-align: center;"><span style="font-size: 14px; word-break: normal !important;">日常学python</span></p><p style="padding-right: 5px; padding-left: 5px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; color: rgb(51, 51, 51); word-break: normal !important; text-align: center;"><span style="font-size: 14px; word-break: normal !important;">代码不止bug，还有美和乐趣</span></p><p><br></p></div><p class="readmore"><a href="/2018/08/07/谈谈如何抓取ajax动态网站/">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/07/说说数据库/">说说数据库</a></h2><div class="post-meta"><p><span class="date">2018-08-07</span><span><a href="/categories/数据库/" class="category">数据库</a></span></p></div><div class="post-content"><section class="96edit" label="Powered by bj.96weixin.com" style="font-size:16px;"><section class="editor"><section style="padding: 5px; box-sizing: border-box;"><section class="96wx-bgc" style="width: 12px; height: 12px; float: left; color: rgb(255, 255, 255); border-radius: 50%; box-sizing: border-box; background-color: rgb(239, 112, 96);"></section><section class="96wx-bgc" style="width: 12px; height: 12px; float: right; color: rgb(255, 255, 255); border-radius: 50%; box-sizing: border-box; background-color: rgb(239, 112, 96);"></section><section style="clear: both;"></section><section style="padding: 0px 10px; margin: -5px; box-sizing: border-box;"><section style="border: 2px dotted rgb(193, 193, 193); padding: 10px; box-sizing: border-box;"><p>爬了数据，只能放在记事本上？小的数据还是可以的，但是当你遇到较多的数据，放在记事本上就不是很好了，这时就需要用到数据库来存储了，那我们今天的主题就是入门数据库，在入门数据库之前，我首先介绍下什么是数据库。<br></p></section></section><section class="96wx-bgc" style="width: 12px; height: 12px; float: left; color: rgb(255, 255, 255); border-radius: 50%; box-sizing: border-box; background-color: rgb(239, 112, 96);"></section><section class="96wx-bgc" style="width: 12px; height: 12px; float: right; color: rgb(255, 255, 255); border-radius: 50%; box-sizing: border-box; background-color: rgb(239, 112, 96);"></section><section style="clear: both;"></section></section></section><p><br></p><section class="editor"><section style="margin:10px auto;"><section style="width: 100%; font-size: 18px; height: 40px; line-height: 40px; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(30, 28, 28); text-align: center; box-sizing: border-box;" data-width="100%">进入正题</section><section style="width: 100%; margin-top: 1px; border-top-style: solid; border-top-width: 1px; border-top-color: rgb(30, 28, 28); box-sizing: border-box;" data-width="100%"></section></section></section><p><br></p><section class="editor"><section style="margin:20px auto 16px;text-align:center;"><section style="border-top-style: solid; border-top-width: 1px; border-top-color: rgb(137, 137, 137); box-sizing: border-box;"><section style="border: 1px solid rgb(137, 137, 137); height: 30px; width: 30px; border-radius: 50%; margin-left: 50px; display: block; text-align: left; margin-top: -15px; box-sizing: border-box; background-color: rgb(255, 255, 255);"><section style="height: 24px; width: 24px; line-height: 24px; border-radius: 50%; margin: 2px auto 0px; text-align: center; color: rgb(255, 255, 255); box-sizing: border-box; background-color: rgb(233, 131, 109);"><p style="line-height:1.5em;"><span style="color: #FFFFFF;vertical-align:middle;" class="autonum">1</span></p></section></section><section style="display: block; padding: 0px 8px; line-height: 24px; margin-top: -30px; text-align: center; box-sizing: border-box;"><section style="display: inline-block; padding: 0px 8px; box-sizing: border-box; background-color: rgb(254, 254, 254);"><p style=""><span style="font-family:微软雅黑">什么是数据库</span></p></section></section></section></section></section><p>在这里我把百度百科的贴出来给大家哈，我也不好解释，毕竟自己页没有到那种境界</p><p><br></p><blockquote><p style="font-family: arial, 'pingfang sc', stheiti, simsun, sans-serif; text-indent: 2em; line-height: 25px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal;">数据库(Database)是按照 数据结构来组织、 存储和管理数据的仓库，它产生于距今六十多年前，随着 信息技术和市场的发展，特别是二十世纪九十年代以后， 数据管理不再仅仅是存储和管理数据，而转变成用户所需要的各种数据管理的方式。数据库有很多种 类型，从最简单的存储有各种数据的 表格到能够进行海量 数据存储的大型&nbsp;数据库系统都在各个方面得到了广泛的应用。</p><p style="font-family: arial, 'pingfang sc', stheiti, simsun, sans-serif; text-indent: 2em; line-height: 25px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal;">在信息化社会，充分有效地管理和利用各类信息资源，是进行科学研究和决策管理的前提条件。数据库技术是管理信息系统、办公自动化系统、决策支持系统等各类信息系统的核心部分，是进行科学研究和决策管理的重要技术手段。</p></blockquote><p><br></p><p>数据有两种，一种是<strong>关系型数据库</strong>，另一种是<strong>非关系型数据</strong>。关系型数据就是以行和列的形式存储数据，以便于用户理解，这一系列的行和列称为表，一组表组成了数据库。表与表之间的数据记录有关系。非关系型数据，也叫<strong>NoSQL</strong>，就是Not only SQL。其性能是基于键值对的，可以想象成表中的主键和值的对应关系，而且不需要经过SQL层的解析，所以性能会非常高，而可扩展性同样也是基于键值对的，数据之间没有耦合性，所以非常容易水平扩展。比如我们即将学到的mongodb和redis都是这类型的数据库。</p><p><br></p><section class="editor"><section style="margin:20px auto 16px;text-align:center;"><section style="border-top-style: solid; border-top-width: 1px; border-top-color: rgb(137, 137, 137); box-sizing: border-box;"><section style="border: 1px solid rgb(137, 137, 137); height: 30px; width: 30px; border-radius: 50%; margin-left: 50px; display: block; text-align: left; margin-top: -15px; box-sizing: border-box; background-color: rgb(255, 255, 255);"><section style="height: 24px; width: 24px; line-height: 24px; border-radius: 50%; margin: 2px auto 0px; text-align: center; color: rgb(255, 255, 255); box-sizing: border-box; background-color: rgb(233, 131, 109);"><p style="line-height:1.5em;">2</p></section></section><section style="display: block; padding: 0px 8px; line-height: 24px; font-size: 18px; margin-top: -30px; text-align: center; box-sizing: border-box;"><section style="display: inline-block; padding: 0px 8px; box-sizing: border-box; background-color: rgb(254, 254, 254);"><p>学习数据库<br></p></section></section></section></section></section><p>今天我们先学习下关系型数据库的一种MySQL。<br></p><p>那么我们就要先下载好mysql这个工具，网站我直接贴出来了<strong><a href="https://dev.mysql.com/downloads/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/</a></strong>，在上面选择自己的版本进行下载安装即可。或者去下载<strong>XAMPP</strong>集成包，里面也有MySQL程序。百度即有下载。</p><p><br></p><p>下载了数据库，还要下载个可视化工具，这样可以清储看到数据内容。可视化工具是Navicat，下载地址为<strong></strong><a href="https://www.navicat.com/en/products。注册码的百度找就有了，土豪请无视吧，下载安装后打开是这样的" _src="https://www.navicat.com/en/products。注册码的百度找就有了，土豪请无视吧，下载安装后打开是这样的" target="_blank" rel="noopener">https://www.navicat.com/en/products。注册码的百度找就有了，土豪请无视吧，下载安装后打开是这样的</a></p><p> <img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802138307.png" title="1802138307.png" _src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802138307.png" alt=""></p><p><br></p><p>然后点击连接，先连接一个本地数据库吧，<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802134386.png" title="1802134386.png" _src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802134386.png" alt=""></p><p><br></p><p>填好上面的数据，注意上面只需填连接名和密码即可，本地连接的ip，端口和名字都是固定的，无需自己写了，然后点击测试看看，<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802136111.png" title="1802136111.png" _src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802136111.png" alt=""></p><p><br></p><p>连接成功就可以按下确定了，这样就成功连接到你的本地数据库了。</p><p><br></p><p>注意：密码是自己设置的，可以点击mysql的这个来设置，如下图<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802132973.png" title="1802132973.png" _src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802132973.png" alt=""></p><p><br></p><section class="editor"><section style="border: 0px none; box-sizing: border-box;"><section style="margin: 10px 0px; padding: 0px; text-align: center; font-family: 微软雅黑; box-sizing: border-box;"><section class="96wx-bdlc 96wx-bdrc" style="margin: 0px; padding: 0px; height: 24px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(245, 189, 209); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(245, 189, 209); box-sizing: border-box;"></section><section class="96wx-bdbc" style="margin-top: -12px; margin-bottom: -12px; padding: 0px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(245, 189, 209); box-sizing: border-box;"></section><section style="margin: 0px; padding: 0px; display: inline-block; box-sizing: border-box;"><section class="96wx-bdrc" style="margin: 0px; padding: 0px; border-right-width: 15px; border-right-style: solid; border-right-color: rgb(245, 189, 209); border-top-width: 12px; border-top-style: solid; border-top-color: transparent; border-bottom-width: 12px; border-bottom-style: solid; border-bottom-color: transparent; height: 0px; width: 0px; float: left; box-sizing: border-box;"></section><section class="96wx-bgc" style="margin: 0px; padding: 0px; height: 24px; min-width: 4em; color: rgb(255, 255, 255); line-height: 24px; float: left; box-sizing: border-box; background-color: rgb(245, 189, 209);"><span style="color:inherit; font-size:12px">END</span></section><section class="96wx-bdlc" style="margin: 0px; padding: 0px; border-left-width: 15px; border-left-style: solid; border-left-color: rgb(245, 189, 209); border-top-width: 12px; border-top-style: solid; border-top-color: transparent; height: 0px; width: 0px; float: left; border-bottom-width: 12px; border-bottom-style: solid; border-bottom-color: transparent; box-sizing: border-box;"></section></section></section></section></section><p>最后，你可以先自己在可视化工具尝试建立自己的第一个数据库看看，不会也没关系，我在明天继续更新mysql的相关基础语法。</p><p><br></p><p>​<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p></section></div><p class="readmore"><a href="/2018/08/07/说说数据库/">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/07/使用requests+BeautifulSoup的简单爬虫练习/">使用requests+BeautifulSoup的简单爬虫练习</a></h2><div class="post-meta"><p><span class="date">2018-08-07</span><span><a href="/categories/python/" class="category">python</a></span></p></div><div class="post-content"><section class="_editor" data-mpa-powered-by="yiban.io" style="max-width: 100%; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><section class="_editor" style="max-width: 100%; word-break: normal !important;"><p class="_brush" style="margin-right: auto; margin-left: auto; max-width: 600px; word-wrap: normal; border-width: 1px; border-style: solid; border-color: rgb(95, 170, 255); font-family: 微软雅黑; font-size: 12px; border-radius: 2em; text-align: center; word-break: normal !important;"><span style="color: rgb(255, 0, 0); word-break: normal !important;">这是日常学python的第17篇原创文章</span></p></section><p style="word-break: normal !important;">上篇文章说了BeautifulSoup库之后，今篇文章就是利用上篇的知识来爬取我们今天的主题网站：<strong style="word-break: normal !important;">猫眼电影top100。</strong>这个网站也挺容易的，所以大家可以先自己爬取下，遇到问题再来看下这篇文章哈。</p><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;">这篇文章主要是练习而已，别无用处，大佬请绕道哈！</p><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;"><strong style="word-break: normal !important;">1、本文用到的库及网站</strong><br style="word-break: normal !important;"></p><ul class=" list-paddingleft-2" style="width: 530.094px; word-break: normal !important; margin: 0px; padding: 0px 0px 0px 30px;"><li><section class="_editor" style="max-width: 100%; word-break: normal !important;"><p style="word-break: normal !important;">requests</p></section></li><li><section class="_editor" style="max-width: 100%; word-break: normal !important;"><p style="word-break: normal !important;">BeautifulSoup</p></section></li><li><section class="_editor" style="max-width: 100%; word-break: normal !important;"><p style="word-break: normal !important;">目标网站：<a href="http://maoyan.com/board/4" target="_blank" rel="noopener">http://maoyan.com/board/4</a></p></section></li></ul><section class="_editor" style="max-width: 100%; word-break: normal !important;"><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;"><strong style="word-break: normal !important;">2、分析目标网站</strong></p><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicDiadOvZOTyZumFhG1UNmJcGSSsCZQibiauzZicXFFiaj6TzCwibCy11wKJbVgAqOuGKRnkkoqQKAq5mrQ/0?wx_fmt=png" data-copyright="0" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicDiadOvZOTyZumFhG1UNmJcGSSsCZQibiauzZicXFFiaj6TzCwibCy11wKJbVgAqOuGKRnkkoqQKAq5mrQ/0?wx_fmt=png"></p><p style="word-break: normal !important;">很容易找到我们想要的信息，上面的5的箭头都是我们想要的信息，分别是电影图片地址、电影名字、主演、上演时间和评分。内容有了，接下来就是获取下一页的链接。</p><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;"><img src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicDiadOvZOTyZumFhG1UNmJcYp39udvAUYTHdqH75PGRaM4k8oyCC0qZGaErLYPibibSCgCjQfMLvDhw/0?wx_fmt=png" title="1523015535292275.png" alt="image.png" class="js_catchremoteimageerror" data-cropselx1="0" data-cropselx2="497" data-cropsely1="0" data-cropsely2="326" data-copyright="0" style="height: 251px; width: 558px; word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicDiadOvZOTyZumFhG1UNmJcYp39udvAUYTHdqH75PGRaM4k8oyCC0qZGaErLYPibibSCgCjQfMLvDhw/0?wx_fmt=png"></p><p style="word-break: normal !important;">这里有两种方法，第一种就是在首页获取所有页的链接，第二种方法就是获取每个页面的下一页的链接。在这里由于只是给了部分页面的链接出来，所以我们获取的是下一页的链接，这样子方便点。</p><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;">好了，分析完毕，接下来代码撸起。</p><p style="word-break: normal !important;"><strong style="word-break: normal !important;">3.敲代码</strong></p><p style="word-break: normal !important;">什么都不管，立即来个get请求</p><p style="word-break: normal !important;"><br></p><section class="output_wrapper" id="output_wrapper_id" style="line-height: 1.6; letter-spacing: 0px; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; color: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: #a9b7c6; background: #282b2e; word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: #f82375; word-wrap: inherit !important; word-break: inherit !important;">import</span> requests<br style="word-break: normal !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: #f82375; word-wrap: inherit !important; word-break: inherit !important;">from</span> bs4 <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: #f82375; word-wrap: inherit !important; word-break: inherit !important;">import</span> BeautifulSoup<br style="word-break: normal !important;"><br style="word-break: normal !important;">url_start = <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘<a href="http://maoyan.com/board/4&#39;" target="_blank" rel="noopener">http://maoyan.com/board/4&#39;</a></span><br style="word-break: normal !important;">response = requests.get(url_start)<br style="word-break: normal !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: #f82375; word-wrap: inherit !important; word-break: inherit !important;">if</span> response.status_code == <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: #ae87fa; word-wrap: inherit !important; word-break: inherit !important;">200</span>:<br style="word-break: normal !important;"> &nbsp; &nbsp;soup = BeautifulSoup(response.text, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘lxml’</span>)<br style="word-break: normal !important;">print(response.text)<br style="word-break: normal !important;"></code></pre></section><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;">输出结果：</p><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;"><img src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicDiadOvZOTyZumFhG1UNmJc0TSCzbhONjIfgrakjHwjSVAKFH1c067raJDybylib0qkoQRAmvjEXfg/0?wx_fmt=png" title="1523016215745434.png" alt="image.png" class="js_catchremoteimageerror" data-cropselx1="0" data-cropselx2="497" data-cropsely1="0" data-cropsely2="326" data-copyright="0" style="height: 254px; width: 558px; word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicDiadOvZOTyZumFhG1UNmJc0TSCzbhONjIfgrakjHwjSVAKFH1c067raJDybylib0qkoQRAmvjEXfg/0?wx_fmt=png"></p><p style="word-break: normal !important;">惊不惊喜，意不意外？如果你经常玩爬虫的，这个就见怪不怪了，我们被反爬了。我们试下加个请求头试试。</p><p style="word-break: normal !important;"><br></p><section class="output_wrapper" id="output_wrapper_id" style="line-height: 1.6; letter-spacing: 0px; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; color: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: #a9b7c6; background: #282b2e; word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;">url_start = <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘<a href="http://maoyan.com/board/4&#39;" target="_blank" rel="noopener">http://maoyan.com/board/4&#39;</a></span><br style="word-break: normal !important;">headers = {<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘User-Agent’</span>:<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36’</span>}<br style="word-break: normal !important;">response = requests.get(url_start, headers=headers)<br style="word-break: normal !important;"></code></pre></section><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;">这样就可以正常返回了，因为一般的网站都会在请求头上加个反爬的，所以遇到了反爬也不要着急，加个请求头试试？</p><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;">接下来用BeautifulSoupL来获取内容</p><section class="output_wrapper" id="output_wrapper_id" style="line-height: 1.6; letter-spacing: 0px; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; color: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: #a9b7c6; background: #282b2e; word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;">imgs = soup.select(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘dd .board-img’</span>) &nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: #808080; word-wrap: inherit !important; word-break: inherit !important;"># 这是获取图片链接</span><br style="word-break: normal !important;">titles = soup.select(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘dd .board-item-main .name’</span>) &nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: #808080; word-wrap: inherit !important; word-break: inherit !important;"># 这是获取电影名字</span><br style="word-break: normal !important;">starses = soup.select(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘dd .board-item-main .movie-item-info .star’</span>) &nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: #808080; word-wrap: inherit !important; word-break: inherit !important;"># 这是获取电影主演</span><br style="word-break: normal !important;">times = soup.select(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘dd .board-item-main .movie-item-info .releasetime’</span>) &nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: #808080; word-wrap: inherit !important; word-break: inherit !important;"># 这是获取电影上映时间</span><br style="word-break: normal !important;">scores = soup.select(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘dd .board-item-main .score-num’</span>) &nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: #808080; word-wrap: inherit !important; word-break: inherit !important;"># 这是获取评分</span><br style="word-break: normal !important;"></code></pre></section><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;">这里每个获取的语句都包含了每个不同电影的信息，这样就不能和正则那样一次把每个电影的信息都在同一个字符里面了。就比如我获取的图片，一个语句获取的是这个页面的所有电影图片的链接，我们存储的时候就要分别取出来了。这里我用到的是for循环0到9把相同的坐标的信息存进同一个字典里面。</p><section class="output_wrapper" id="output_wrapper_id" style="line-height: 1.6; letter-spacing: 0px; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; background: #282b2e; word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;"><span style="color: #a9b7c6; word-break: normal !important;">films = [] &nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: #808080; word-wrap: inherit !important; word-break: inherit !important;"># 存储一个页面的所有电影信息</span><br style="word-break: normal !important;"> &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: #f82375; word-wrap: inherit !important; word-break: inherit !important;">for</span> x <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: #f82375; word-wrap: inherit !important; word-break: inherit !important;">in</span> range(<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: #ae87fa; word-wrap: inherit !important; word-break: inherit !important;">0</span>, </span><span style="color: #ae87fa; word-break: normal !important;">10</span><span style="color: #a9b7c6; word-break: normal !important;">):<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="hljs-comment" style="color: #808080; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;"># 这个是获取属性的链接</span><span style="color: #a9b7c6; word-break: normal !important;"><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;img = imgs[x][</span><span class="hljs-string" style="color: #eedc70; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">‘data-src’</span><span style="color: #a9b7c6; word-break: normal !important;">]<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="hljs-comment" style="color: #808080; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;"># 下面的都是获取标签的内容并去掉两端空格</span><span style="color: #a9b7c6; word-break: normal !important;"><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;title = titles[x].get_text().strip()<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;stars = starses[x].get_text().strip()[</span><span class="hljs-number" style="color: #ae87fa; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">3</span><span style="color: #a9b7c6; word-break: normal !important;">:] &nbsp;</span><span class="hljs-comment" style="color: #808080; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;"># 使用切片是去掉主演二字</span><span style="color: #a9b7c6; word-break: normal !important;"><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;time = times[x].get_text().strip()[</span><span class="hljs-number" style="color: #ae87fa; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">5</span><span style="color: #a9b7c6; word-break: normal !important;">:] &nbsp;</span><span class="hljs-comment" style="color: #808080; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;"># 使用切片是去掉上映时间二字</span><span style="color: #a9b7c6; word-break: normal !important;"><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;score = scores[x].get_text().strip()<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;film = {</span><span class="hljs-string" style="color: #eedc70; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">‘title’</span><span style="color: #a9b7c6; word-break: normal !important;">: title</span><span style="color: #a9b7c6; word-break: normal !important;">, </span><span class="hljs-string" style="color: #eedc70; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">‘img’</span><span style="color: #a9b7c6; word-break: normal !important;">: img, </span><span class="hljs-string" style="color: #eedc70; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">‘stars’</span><span style="color: #a9b7c6; word-break: normal !important;">: stars, </span><span class="hljs-string" style="color: #eedc70; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">‘time’</span><span style="color: #a9b7c6; word-break: normal !important;">: time, </span><span class="hljs-string" style="color: #eedc70; font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">‘score’</span><span style="color: #a9b7c6; word-break: normal !important;">: score}<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;films.append(film)<br style="word-break: normal !important;"></span></code></pre></section><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;">接下来就是获取每一页的链接</p><section class="output_wrapper" id="output_wrapper_id" style="line-height: 1.6; letter-spacing: 0px; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; color: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: #a9b7c6; background: #282b2e; word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;">pages = soup.select(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘.list-pager li a’</span>) &nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; color: #808080; word-wrap: inherit !important; word-break: inherit !important;"># 可以看到下一页的链接在最后一个a标签</span><br style="word-break: normal !important;"> &nbsp; &nbsp;page = pages[len(pages)<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: #ae87fa; word-wrap: inherit !important; word-break: inherit !important;">-1</span>][<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">‘href’</span>]<br style="word-break: normal !important;"></code></pre></section><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;">后面的就简单了，就是利用循环把所有页面的内容都去取出来就可以了，代码就不贴出来了。</p><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;"><strong style="word-break: normal !important;">写在最后</strong></p><p style="word-break: normal !important;">这个就是BeautifulSoup库的小练习，用到昨天的内容不多，只是用到了选择器部分和获取文本内容和属性部分，感觉还是正则比较好用点哈，我一个正则就可以获取每个电影的详细内容了，如下:</p><section class="output_wrapper" id="output_wrapper_id" style="line-height: 1.6; letter-spacing: 0px; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; color: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: #a9b7c6; background: #282b2e; word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;">&lt;dd&gt;.<em>?board-index.</em>?&gt;([\d]{<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: #ae87fa; word-wrap: inherit !important; word-break: inherit !important;">1</span>,<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: #ae87fa; word-wrap: inherit !important; word-break: inherit !important;">3</span>})&lt;/i&gt;.<em>?title=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: #eedc70; word-wrap: inherit !important; word-break: inherit !important;">“(.</span></em>?)”.<em>?<span class="hljs-class" style="font-size: inherit; color: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: #f82375; word-wrap: inherit !important; word-break: inherit !important;">class</span>=”<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">star</span>“&gt;<span class="hljs-params" style="font-size: inherit; line-height: inherit; color: #ff9823; word-wrap: inherit !important; word-break: inherit !important;">(.</span></span></em>?)&lt;/<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">p</span>&gt;.<em>?<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">class</span>=”<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">releasetime</span>“&gt;<span class="hljs-params" style="font-size: inherit; line-height: inherit; color: #ff9823; word-wrap: inherit !important; word-break: inherit !important;">(.</span></em>?)&lt;/<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">p</span>&gt;.<em>?<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">class</span>=”<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">integer</span>“&gt;<span class="hljs-params" style="font-size: inherit; line-height: inherit; color: #ff9823; word-wrap: inherit !important; word-break: inherit !important;">(.</span></em>?)&lt;/<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">i</span>&gt;.<em>?<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">class</span>=”<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">fraction</span>“&gt;<span class="hljs-params" style="font-size: inherit; line-height: inherit; color: #ff9823; word-wrap: inherit !important; word-break: inherit !important;">(.</span></em>?)&lt;/<span class="hljs-title" style="font-size: inherit; line-height: inherit; color: #a5da2d; word-wrap: inherit !important; word-break: inherit !important;">i</span>&gt;<br style="word-break: normal !important;"></code></pre></section><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;">还需要用到个匹配模式哈：<strong style="word-break: normal !important;">re.S</strong>就可以了。所以本人推荐使用正则表达式哈。</p><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;">需要完整代码的请查看我的github哈！</p><p style="word-break: normal !important;">github：<a href="https://github.com/SergioJune/gongzhonghao_code/blob/master/python3_spider/index.py" _src="https://github.com/SergioJune/gongzhonghao_code/blob/master/python3_spider/index.py" _href="https://github.com/SergioJune/gongzhonghao_code/blob/master/python3_spider/index.py" style="word-break: normal !important;" target="_blank" rel="noopener">https://github.com/SergioJune/gongzhonghao_code/blob/master/python3_spider/index.py</a></p><p style="word-break: normal !important;"><br></p><p style="margin-bottom: 5px; padding-right: 5px; padding-left: 5px; line-height: 1.5em; letter-spacing: 2px; word-break: normal !important;">如果这篇文章对你有用，点个赞，转个发如何？</p><section style="word-break: normal !important;"><p style="padding-right: 5px; padding-left: 5px; letter-spacing: 2px; word-break: normal !important;"><br></p><section style="padding-right: 8px; padding-left: 8px; height: 35px; display: inline-block; border-top: 1px solid rgb(0, 0, 0); border-right: 1px solid rgb(0, 0, 0); border-bottom: 1px solid rgb(0, 0, 0); font-weight: bold; line-height: 35px; vertical-align: middle; word-break: normal !important; box-sizing: border-box;">MORE</section><section style="padding-right: 8px; padding-left: 8px; height: 35px; display: inline-block; border-top: 1px solid rgb(0, 0, 0); border-bottom: 1px solid rgb(0, 0, 0); line-height: 35px; vertical-align: middle; word-break: normal !important; box-sizing: border-box;">延伸阅读</section><p style="word-break: normal !important;"><br></p><section style="padding-right: 15px; padding-left: 15px; line-height: 2em; word-break: normal !important; box-sizing: border-box;"><p style="padding-right: 5px; padding-left: 5px; letter-spacing: 2px; word-break: normal !important;"><span style="text-decoration-line: underline; word-break: normal !important;">◐◑<a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483760&amp;idx=1&amp;sn=3e08dbc95596839abe1c84752453415f&amp;chksm=fb4a7bdccc3df2cae9f3b4df5b410017b72d62a4c26a70d8d7afb4294024928bc5d53572368a&amp;scene=21#wechat_redirect" target="_blank" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483760&amp;idx=1&amp;sn=3e08dbc95596839abe1c84752453415f&amp;chksm=fb4a7bdccc3df2cae9f3b4df5b410017b72d62a4c26a70d8d7afb4294024928bc5d53572368a&amp;scene=21#wechat_redirect" style="word-break: normal !important;">爬取《The Hitchhiker’s Guide to Python!》python进阶书并制成pdf</a><span style="color: #4f81bd; word-break: normal !important;"></span></span></p><p style="padding-right: 5px; padding-left: 5px; letter-spacing: 2px; word-break: normal !important;"><span style="text-decoration-line: underline; word-break: normal !important;">◐◑&nbsp;<a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483766&amp;idx=1&amp;sn=7c7a237e8fda8e0c7085740034b81e8e&amp;chksm=fb4a7bdacc3df2cc04cd32fa6f58f7dfe2e2e829e7709676f1fa6b1846cf7ceb3ef60fcb2e3e&amp;scene=21#wechat_redirect" target="_blank" style="word-break: normal !important;" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483766&amp;idx=1&amp;sn=7c7a237e8fda8e0c7085740034b81e8e&amp;chksm=fb4a7bdacc3df2cc04cd32fa6f58f7dfe2e2e829e7709676f1fa6b1846cf7ceb3ef60fcb2e3e&amp;scene=21#wechat_redirect">python爬虫常用库之BeautifulSoup详解</a></span></p><p style="padding-right: 5px; padding-left: 5px; letter-spacing: 2px; word-break: normal !important;"><span style="text-decoration-line: underline; word-break: normal !important;">◐◑&nbsp;<a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483740&amp;idx=1&amp;sn=9c62ebf1b4d284159a0500f060cb4527&amp;chksm=fb4a7bf0cc3df2e6d504c4a32d9a6e51828b5961b31ef6da81fcab8cf1b6df64bb8a99894fe3&amp;scene=21#wechat_redirect" target="_blank" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483740&amp;idx=1&amp;sn=9c62ebf1b4d284159a0500f060cb4527&amp;chksm=fb4a7bf0cc3df2e6d504c4a32d9a6e51828b5961b31ef6da81fcab8cf1b6df64bb8a99894fe3&amp;scene=21#wechat_redirect" style="word-break: normal !important;">老司机带你用python来爬取妹子图</a></span></p><p style="word-break: normal !important;"><br></p><p style="word-break: normal !important;"><br></p></section></section><p style="padding-right: 5px; padding-left: 5px; text-align: center; letter-spacing: 2px; word-break: normal !important;"><img border="0" height="auto" title="undefined" width="111.297px" _width="111.297px" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWic7kTqqWcYlc513VaLSgic5P9bIBwdybZBf6KpAX6nhqeHkC0cW2KfQgGCiaREUD1uxt6nLhSO2bWsg/640" data-fail="0" style="margin-bottom: 1.4px; border-radius: 5px; border-width: 1px; border-style: dashed; border-color: #a8a4ab; box-shadow: rgba(0, 0, 0, 0.33) 6px 6px 5px 0px; word-break: normal !important; visibility: visible !important; width: 111.297px !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWic7kTqqWcYlc513VaLSgic5P9bIBwdybZBf6KpAX6nhqeHkC0cW2KfQgGCiaREUD1uxt6nLhSO2bWsg/640"><br style="word-break: normal !important;"></p><p style="text-align: center; word-break: normal !important;"><br></p><p style="padding-right: 5px; padding-left: 5px; text-align: center; letter-spacing: 2px; word-break: normal !important;"><span style="font-size: 14px; word-break: normal !important;">日常学python</span></p><p style="padding-right: 5px; padding-left: 5px; text-align: center; letter-spacing: 2px; word-break: normal !important;"><span style="font-size: 14px; word-break: normal !important;">代码不止bug，还有美和乐趣</span></p><div><span style="font-size: 14px; word-break: normal !important;"><br></span></div></section><section class="_editor" style="max-width: 100%; word-break: normal !important;"></section></section></div><p class="readmore"><a href="/2018/08/07/使用requests+BeautifulSoup的简单爬虫练习/">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/07/入门mysql数据库/">入门mysql数据库</a></h2><div class="post-meta"><p><span class="date">2018-08-07</span><span><a href="/categories/数据库/" class="category">数据库</a></span></p></div><div class="post-content"><section class="96edit" label="Powered by bj.96weixin.com" style="font-size:16px;"><section class="editor"><section style="padding: 5px; box-sizing: border-box;"><section class="96wx-bgc" style="width: 12px; height: 12px; float: left; color: rgb(255, 255, 255); border-radius: 50%; box-sizing: border-box; background-color: rgb(239, 112, 96);"></section><section class="96wx-bgc" style="width: 12px; height: 12px; float: right; color: rgb(255, 255, 255); border-radius: 50%; box-sizing: border-box; background-color: rgb(239, 112, 96);"></section><section style="clear: both;"></section><section style="padding: 0px 10px; margin: -5px; box-sizing: border-box;"><section style="border: 2px dotted rgb(193, 193, 193); padding: 10px; box-sizing: border-box;"><p>上篇文章简单说了下数据库，并教了怎样安装mysql工具和可视化工具，不知道你现在安装好了没？那今天我们继续说mysql，今天说下mysql语句。</p></section></section><section class="96wx-bgc" style="width: 12px; height: 12px; float: left; color: rgb(255, 255, 255); border-radius: 50%; box-sizing: border-box; background-color: rgb(239, 112, 96);"></section><section class="96wx-bgc" style="width: 12px; height: 12px; float: right; color: rgb(255, 255, 255); border-radius: 50%; box-sizing: border-box; background-color: rgb(239, 112, 96);"></section><section style="clear: both;"></section></section></section><section class="editor"><section style="margin:10px auto;"><section style="width: 100%; font-size: 18px; height: 40px; line-height: 40px; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(30, 28, 28); text-align: center; box-sizing: border-box;" data-width="100%">进入正题</section><section style="width: 100%; margin-top: 1px; border-top-style: solid; border-top-width: 1px; border-top-color: rgb(30, 28, 28); box-sizing: border-box;" data-width="100%"></section></section></section><p><br></p><p>mysql语句分为两种，一种是<strong>DDL</strong>，就是数据定义语句，比如那些CREATE,ALTER。另一种是<strong>DML</strong>，就是数据管理语句，比如增删改查，我所说的就是DML，那么开始吧！<br></p><p><br></p><section class="editor"><section style="margin: 10px auto; padding: 2px; box-sizing: border-box;"><section style="width: 60px;height: 40px;text-align: center;font-size: 2em;color: rgb(255, 255, 255);float: left;line-height: 40px;background: linear-gradient(-45deg, transparent 14.14px, rgb(139,183,72) 0px) right bottom / 50% 50% no-repeat, linear-gradient(45deg, transparent 14.14px, rgb(139,183,72) 0px) left bottom / 50% 50% no-repeat, linear-gradient(135deg, transparent 14.14px, rgb(139,183,72) 0px) left top / 50% 50% no-repeat, linear-gradient(-135deg, transparent 14.14px, rgb(139,183,72) 0px) right top / 50% 50% no-repeat;"><section class="autonum">1</section></section><section style="word-wrap: break-word; border-bottom-width: 2px; border-bottom-style: dashed; border-bottom-color: rgb(128, 177, 53); min-height: 36px; display: inline-block; line-height: 36px; margin-top: 0px; margin-left: 10px; box-sizing: border-box;"><span style="color: #80B135; font-size: 18px; margin-top: 0px; display: inline-block;">创建并使用数据库</span></section></section></section><p>我们先打开navicat可视化管理工具，连接好我们的本地数据库<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802149596.png" title="1802149596.png" alt=""></p><p><br></p><p>然后点击查询，进行写我们的mysql语句<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802147751.png" title="1802147751.png" alt=""></p><p><br></p><p>那么正式开始创建数据库并使用<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802145264.png" title="1802145264.png" alt=""></p><p><br></p><p>这里我创建了个school的数据库，并使用了他。运行语句可以直接点上面的运行，也可以这样<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802144356.png" title="1802144356.png" alt=""></p><p><br></p><p><strong>注意：</strong>那个数据库的引号是个<strong>反引号</strong>，在tab键的上方，还有mysql的注释是<strong>两个划线再加一个空格</strong>。语句结束后最好加个 <strong>;</strong> 来结束</p><p><br></p><p>在这里我们也可以看看我们已有的数据库<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802142086.png" title="1802142086.png" alt=""></p><p><br></p><p>上面成功创建后你将会在左侧看到这个数据库，这样就成功了。<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802142969.png" title="1802142969.png" alt=""></p><p><br></p><section class="editor"><section style="margin: 10px auto; padding: 2px; box-sizing: border-box;"><section style="width: 60px;height: 40px;text-align: center;font-size: 2em;color: rgb(255, 255, 255);float: left;line-height: 40px;background: linear-gradient(-45deg, transparent 14.14px, rgb(139,183,72) 0px) right bottom / 50% 50% no-repeat, linear-gradient(45deg, transparent 14.14px, rgb(139,183,72) 0px) left bottom / 50% 50% no-repeat, linear-gradient(135deg, transparent 14.14px, rgb(139,183,72) 0px) left top / 50% 50% no-repeat, linear-gradient(-135deg, transparent 14.14px, rgb(139,183,72) 0px) right top / 50% 50% no-repeat;"><section class="autonum">2</section></section><section style="word-wrap: break-word; border-bottom-width: 2px; border-bottom-style: dashed; border-bottom-color: rgb(128, 177, 53); min-height: 36px; display: inline-block; line-height: 36px; margin-top: 0px; margin-left: 10px; box-sizing: border-box;"><span style="color: #80B135; font-size: 18px; margin-top: 0px; display: inline-block;">进行建表</span></section></section></section><p><br></p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802142620.png" title="1802142620.png" alt=""></p><p>上面创建了一个student的表格，并且有id，name，sex，age，address和in_school这几个栏位，其中id是自增的，用了<strong>AUTO_INCREMENT</strong>来声明的。<strong>NOT NULL</strong> 就是代表该栏位不能为空，<strong>NULL</strong>就是相反的。而INT,CHAR这些是数据类型，mysql的数据类型有int,char,varchar(括号里的是自定义长度),datetime等。那么，接下来点击运行，<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802147631.png" title="1802147631.png" alt=""></p><p><br></p><p>结果报了错，说我没有主键，那我们可以在id栏位加上主键声明<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802147578.png" title="1802147578.png" alt=""></p><p><br></p><p>再次运行，就成功了，你点开数据库，你会看到这个<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802144513.png" title="1802144513.png" alt=""></p><p><br></p><section class="editor"><section style="margin: 10px auto; padding: 2px; box-sizing: border-box;"><section style="width: 60px;height: 40px;text-align: center;font-size: 2em;color: rgb(255, 255, 255);float: left;line-height: 40px;background: linear-gradient(-45deg, transparent 14.14px, rgb(139,183,72) 0px) right bottom / 50% 50% no-repeat, linear-gradient(45deg, transparent 14.14px, rgb(139,183,72) 0px) left bottom / 50% 50% no-repeat, linear-gradient(135deg, transparent 14.14px, rgb(139,183,72) 0px) left top / 50% 50% no-repeat, linear-gradient(-135deg, transparent 14.14px, rgb(139,183,72) 0px) right top / 50% 50% no-repeat;"><section class="autonum">3</section></section><section style="word-wrap: break-word; border-bottom-width: 2px; border-bottom-style: dashed; border-bottom-color: rgb(128, 177, 53); min-height: 36px; display: inline-block; line-height: 36px; margin-top: 0px; margin-left: 10px; box-sizing: border-box;"><span style="color: #80B135; font-size: 18px; margin-top: 0px; display: inline-block;">进行增删改查操作</span></section></section></section><p><strong>1).往数据库添加数据</strong></p><p>格式为：INSERT INTO <code>tablename</code> VALUE(v1,v2,v3,…),如下：<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802144236.png" title="1802144236.png" alt=""></p><p><br></p><p>这是往students表中添加数据，VALUE后的括号填的<strong>值需要对应刚才你创建表时候的栏位</strong>，要不会报错。但是如果每个都需要这样岂不是很麻烦？不怕。</p><p>若是只想填几个栏位，也可以这样填<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802147720.png" title="1802147720.png" alt=""></p><p><br></p><p>这里是在表名加个你需要填的栏位即可，后面的数据也要记得一 一对应，还有的就是，那些是<strong>NOT NULL 的必须要填</strong>，否则也会报错。</p><p>添加了数据之后效果如下图<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802145784.png" title="1802145784.png" alt=""></p><p><br></p><p>还有一个问题就是，可不可以一次性添加多个数据？答案是肯定可以。想一次性添加多个数据时，只需要把<strong>VALUE改成VALUES</strong>即可，然后每个数据用逗号隔开，如下：<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802141170.png" title="1802141170.png" alt=""></p><p><br></p><p><strong>2).查询表格中的数据</strong></p><p>最简单的格式为：SELECT data FROM tablename</p><p>查询students表格的所有数据</p><p><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802146925.png" title="1802146925.png" alt=""></p><p><br></p><p><strong>*</strong> 是代表所有数据，实际开发中并不会这样查询，因为会影响效率。我们可以指定某一栏位进行查询，如下<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802143225.png" title="1802143225.png" alt=""></p><p><br></p><p>这样代表只查name和sex这两个栏位的。</p><p><br></p><p>我们还可以按条件来进行查询，比如只查询性别为女的，嘻嘻<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802142965.png" title="1802142965.png" alt=""></p><p><br></p><p>这样就查到了性别为女的数据，可以看到，<strong>WHERE</strong>后面跟的就是条件</p><p><br></p><p>我们还可以将结果进行排序<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802143100.png" title="1802143100.png" alt=""></p><p><br></p><p>这里可以看到他是按照id来倒序来排的，<strong>ORDER BY </strong>后面跟的是排序条件，而那个<strong>DESC</strong>是倒序，默认是顺序，为<strong>ASC</strong>。</p><p><br></p><p>查询还不止这些，比如还可以指定偏移数来查询多少数据，如下<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802141906.png" title="1802141906.png" alt=""></p><p><br></p><p>这里是查询年龄大于19岁的学生，并且按照id来降序来排，查询了第一页的3条数据。其中<strong>LIMIT</strong>就是指定查询多少页的多少数据。上述的 <strong>1 </strong>代表的是偏移数， 而<strong> 3 </strong>就是代表数据数，所有表示的是偏移一个数据来查下面的三个数据。</p><p><br></p><p>其实，查询是有一条很长的表达式的，如下：</p><p><br></p><p><strong>SELECT</strong> data<strong> FROM </strong>tablename<strong> WHERE </strong>condition<strong> GROUP BY </strong>con <strong> HAVING </strong>condition<strong> ORDER BY </strong>condition<strong> LIMIT </strong>offset,num<br></p><p><br></p><p>我们在写查询语句时，必须按照上面的顺序，粗体字就是关键字，要不会出错，没有时可以省略。再说说上面还没有说过的几个关键字。</p><ul class=" list-paddingleft-2" style="list-style-type: disc; margin: 0px; padding: 0px 0px 0px 30px;"><li><p>GROUP BY:这个是分组。</p></li><li><p>HAVING:这个是按条件来分组。</p></li></ul><p>好了，查询的就这么多。</p><p><br></p><p><strong>3).修改数据</strong></p><p>格式为：<strong>UPDATE</strong> tablename <strong>SET </strong>data [<strong>WHERE</strong> condition]</p><p>中括号里的是可以省略，为删除的条件，<strong>省略时就为更改所有数据</strong><img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802149765.png" title="1802149765.png" alt=""></p><p><br></p><p>上面的就是修改表格students的表格，其中<strong>SET</strong>的数据是修改的数据</p><p><br></p><p><strong>4).删除数据</strong></p><p>格式为：DELETE FROM tablename [WHERE condition]</p><p><br></p><p>中括号和修改数据的意思一样，也挺简单的。注意：<strong>不写WHERE</strong>时是删除该表格的所有数据<img src="http://pic.96weixin.com/upload/image2/vip/881679/1802/1802142372.png" title="1802142372.png" alt=""></p><p><br></p><p>这是删除students表的性别为男的数据</p><p><br></p><section class="editor"><section style="border: 0px none; box-sizing: border-box;"><section style="margin: 10px 0px; padding: 0px; text-align: center; font-family: 微软雅黑; box-sizing: border-box;"><section class="96wx-bdlc 96wx-bdrc" style="margin: 0px; padding: 0px; height: 24px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(245, 189, 209); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(245, 189, 209); box-sizing: border-box;"></section><section class="96wx-bdbc" style="margin-top: -12px; margin-bottom: -12px; padding: 0px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(245, 189, 209); box-sizing: border-box;"></section><section style="margin: 0px; padding: 0px; display: inline-block; box-sizing: border-box;"><section class="96wx-bdrc" style="margin: 0px; padding: 0px; border-right-width: 15px; border-right-style: solid; border-right-color: rgb(245, 189, 209); border-top-width: 12px; border-top-style: solid; border-top-color: transparent; border-bottom-width: 12px; border-bottom-style: solid; border-bottom-color: transparent; height: 0px; width: 0px; float: left; box-sizing: border-box;"></section><section class="96wx-bgc" style="margin: 0px; padding: 0px; height: 24px; min-width: 4em; color: rgb(255, 255, 255); line-height: 24px; float: left; box-sizing: border-box; background-color: rgb(245, 189, 209);"><span style="color:inherit; font-size:12px">END</span></section><section class="96wx-bdlc" style="margin: 0px; padding: 0px; border-left-width: 15px; border-left-style: solid; border-left-color: rgb(245, 189, 209); border-top-width: 12px; border-top-style: solid; border-top-color: transparent; height: 0px; width: 0px; float: left; border-bottom-width: 12px; border-bottom-style: solid; border-bottom-color: transparent; box-sizing: border-box;"></section></section></section></section></section><p>好了，如果你跟着我一步步做，恭喜你，学会了简单的数据库语句，现在留个练习给你们，可以检验下自己有没有学会操作mysql：</p><p><br></p><p><span style="line-height: 25.6px;">1.</span><span style="line-height: inherit;">创建一个数据库,然后设计一个新闻表(数据类型要使用合理)</span><br></p><p><span style="line-height: 25.6px;">2.</span>使用SQL语句向数据表写入十五条不同的数据</p><p>3.使用SQL语句查询类别为“百家”的新闻数据</p><p>4.使用SQL语句删除一条新闻数据</p><p>5.使用SQL语句查询所有的新闻，以添加时间的倒序进行排列</p><p>6.使用SQL语句查询第二页数据(每一页5条数据)</p><p><br></p><p>学会了mysql语句，如果想学更多请去官方文档哈，这是网址<a href="https://dev.mysql.com/doc/refman/5.7/en/。在下一篇文章我将会讲述如何用python来连接操作数据库。记得来看看哈！" _src="https://dev.mysql.com/doc/refman/5.7/en/。在下一篇文章我将会讲述如何用python来连接操作数据库。记得来看看哈！" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/。在下一篇文章我将会讲述如何用python来连接操作数据库。记得来看看哈！</a></p><p><br></p><p>祝大家今天情人节快乐哈，我没什么礼物送给大家，只能送点学习资料，如果需要的话可以在后天回复<strong>资源</strong>即可获得哈 ！多谢大家捧场。</p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p></section></div><p class="readmore"><a href="/2018/08/07/入门mysql数据库/">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/07/如何爬取asp动态网页？搞定可恶的动态参数，这一文告诉你！/">如何爬取asp动态网页？搞定可恶的动态参数，这一文告诉你！</a></h2><div class="post-meta"><p><span class="date">2018-08-07</span><span><a href="/categories/python/" class="category">python</a></span></p></div><div class="post-content"><p data-mpa-powered-by="yiban.io" style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important; text-align: center;">这个asp网站是我的学校的电费查询系统，需要学校的内网才能查询，所以这文说下思路和我遇到的一些坑。我搞这个网站主要是为了方便查电费而已，其实也方便不了多少。而且这个asp网站还不是很容易爬，因为里面有两个可变的参数，会根据页面来变化。好了，先看看页面</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicH11syYCaS175fFnibibUOql36mUssTWKTmBD3z0rcR3chfqia6VW3RlxahkOJd9O3Nl3iaj2KQ9XEYg/0?wx_fmt=png" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicH11syYCaS175fFnibibUOql36mUssTWKTmBD3z0rcR3chfqia6VW3RlxahkOJd9O3Nl3iaj2KQ9XEYg/0?wx_fmt=png"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">这个网站需要先登陆进自己的宿舍才能进去，还有很烂的验证码，不过我实现到验证码写入的时候发现这个验证码是可以随便填的，这个就感觉有点垃圾。</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">这个登陆页面有很多坑，下面说下</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">1.</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicH11syYCaS175fFnibibUOqld7T4lPTHf1EnNxbAgm0as5piaB5JPsP358B2d8dfia24h1bSyjOhG3Jw/0?wx_fmt=png" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicH11syYCaS175fFnibibUOqld7T4lPTHf1EnNxbAgm0as5piaB5JPsP358B2d8dfia24h1bSyjOhG3Jw/0?wx_fmt=png"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">上面右边所指的就是两个动态变化的参数，怎么来的呢？是根据上一个页面来的，每个页面都会带有这两个参数，所以我们需要每次访问一次都需要匹配下这两个值就行动态更换，如果不跟换的话，会得不到数据，还会出现下面这个错误。</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" class="mpa-template" mpa-preserve="t" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; background-image: none; background-color: initial; word-break: normal !important;">‘236|error|500|回发或回调参数无效。在配置中使用&nbsp;&lt;pages&nbsp;enableEventValidation=”true”/&gt;&nbsp;或在页面中使用&nbsp;&lt;%@&nbsp;Page&nbsp;EnableEventValidation=”true”&nbsp;%&gt;&nbsp;启用了事件验证。出于安全目的，此功能验证回发或回调事件的参数是否来源于最初呈现这些事件的服务器控件。如果数据有效并且是预期的，则使用 ClientScriptManager.RegisterForEventValidation 方法来注册回发或回调数据以进行验证。|’<br></pre></section><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">这个就说明你没有更换好上面所说的两个参数</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">注意：第一次访问这个网站是不会有宿舍楼层宿舍号这些数据的，需要进行匹配上面的两个可变参数再进行post才会有数据。</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">2.</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">在你选好你的宿舍楼层号之后表单数据就会出现变化</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicH11syYCaS175fFnibibUOqlvFwQRfFgLW24XIriaNHRDSuftoeL7CmrMoibzA7gruT9AhzrnnQ9g79g/0?wx_fmt=png" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicH11syYCaS175fFnibibUOqlvFwQRfFgLW24XIriaNHRDSuftoeL7CmrMoibzA7gruT9AhzrnnQ9g79g/0?wx_fmt=png"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">可以看到表单的参数顺序和上面的不一样了，所以在选好宿舍楼层之后我们需要把变单顺序改变后再把参数post出去，要不还会出现上面那个坑，就是回调参数无效</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicH11syYCaS175fFnibibUOqlwq1n3UfS2GibODMGic8CEn7vtShkOicJOf6vbibiaEh90ztVy5M2cvVdLzg/0?wx_fmt=png" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicH11syYCaS175fFnibibUOqlwq1n3UfS2GibODMGic8CEn7vtShkOicJOf6vbibiaEh90ztVy5M2cvVdLzg/0?wx_fmt=png"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">第一个箭头所指的参数也需要改变，不过第二个参数是txtname2，也就是每层楼的默认宿舍值，这个固定也没事，不会出错，时间的话还是需要根据自己访问时间来进行变化的，要不也会出现错误，还是同样的错误，也就是下面的这个错误，可想而知asp网站对这些参数是有很挑剔的要求。</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" class="mpa-template" mpa-preserve="t" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; background-image: none; background-color: initial; word-break: normal !important;">236|error|500|回发或回调参数无效。在配置中使用 &lt;pages enableEventValidation=”true”/&gt; 或在页面中使用 &lt;%@ Page EnableEventValidation=”true” %&gt; 启用了事件验证。出于安全目的，此功能验证回发或回调事件的参数是否来源于最初呈现这些事件的服务器控件。如果数据有效并且是预期的，则使用 ClientScriptManager.RegisterForEventValidation 方法来注册回发或回调数据以进行验证。|<br></pre></section><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">3.</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicH11syYCaS175fFnibibUOqlxWBRQNSmbSeHyTHYrEDrAPZ8ApJhUHdw2huXNXZqPbvH3n4ib6pNOUw/0?wx_fmt=png" style="word-break: normal !important;" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicH11syYCaS175fFnibibUOqlxWBRQNSmbSeHyTHYrEDrAPZ8ApJhUHdw2huXNXZqPbvH3n4ib6pNOUw/0?wx_fmt=png"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">这个电费查询按钮，不是ajax，会有新的请求，而且是对同一个网址的不同请求方式，第一次请求时get请求，用于获取asp网页的那两个动态参数，第二次是将动态参数就行post发送出去，这样就会有数据了，如果你是第一次就post的话，会没有数据，网页还是会报错误，同样还是那个错误哈。下面是表单数据</p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" class="mpa-template" mpa-preserve="t" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; background-image: none; background-color: initial; word-break: normal !important;"><code class="hljs-default" style="margin-right: 0.15em; margin-left: 0.15em; padding: 6px; border-radius: 4px; font-size: 0.85em; background: rgb(40, 44, 52); color: rgb(171, 178, 191); display: block; overflow-x: auto; white-space: nowrap; word-break: normal !important;"><span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">self</span>.data = {<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 99px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>EVENTTARGET’</strong></span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 363px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘RegionPanel2$Region1$Toolbar1$ContentPanel1$btnSelect’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 112px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘EVENTARGUMENT’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 14px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 86px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>VIEWSTATE’</strong></span>:&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">self</span>.data[<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 86px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘VIEWSTATE’</span>],<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 125px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>EVENTVALIDATION’</strong></span>:&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">self</span>.data[<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 126px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘EVENTVALIDATION’</span>],<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 46px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘hidJZ’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 27px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘jz’</span>+name,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 356px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘RegionPanel2$Region1$Toolbar1$ContentPanel1$TextBox1’</span>: (datetime.now()-timedelta(days=<span class="hljs-default-number" style="color: rgb(209, 154, 102); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(209, 154, 102); word-break: normal !important;">30</span>)).strftime(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 66px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘%Y-%m-%d’</span>),<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 356px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘RegionPanel2$Region1$Toolbar1$ContentPanel1$TextBox2’</span>: datetime.now().strftime(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 66px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘%Y-%m-%d’</span>),<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 350px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘RegionPanel2$Region1$Toolbar1$ContentPanel1$txtDBBH’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 350px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘RegionPanel2$Region1$Toolbar1$ContentPanel1$ddlCZFS’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 90px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘—-全部—-‘</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 297px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘RegionPanel2$Region1$toolbarButtom$pagesize’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘1’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 172px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>box_page_state_changed’</strong></span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 46px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘false’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 99px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘2_collapsed’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 46px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘false’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 119px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>6_selectedRows’</strong></span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 257px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘box_disabled_control_before_postbac’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 40px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>10’</strong></span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 112px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘box_ajax_mark’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 40px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘true’</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;}</code></pre></section><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">坑说完了，说说部分代码的作用吧</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" class="mpa-template" mpa-preserve="t" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; background-image: none; background-color: initial; word-break: normal !important;"><code class="hljs-default" style="margin-right: 0.15em; margin-left: 0.15em; padding: 6px; border-radius: 4px; font-size: 0.85em; background: rgb(40, 44, 52); color: rgb(171, 178, 191); display: block; overflow-x: auto; white-space: nowrap; word-break: normal !important;"><span class="hljs-default-function" style="background: rgba(0, 0, 0, 0); display: inline; width: 185px; text-decoration-style: solid; text-decoration-color: rgb(171, 178, 191); word-break: normal !important;"><span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">def</span>&nbsp;<span class="hljs-default-title" style="color: rgb(97, 174, 238); background: rgba(0, 0, 0, 0); display: inline; width: 73px; text-decoration-style: solid; text-decoration-color: rgb(97, 174, 238); word-break: normal !important;"><strong>get_value</strong></span><span class="hljs-default-params" style="background: rgba(0, 0, 0, 0); display: inline; width: 79px; text-decoration-style: solid; text-decoration-color: rgb(171, 178, 191); word-break: normal !important;">(self, html)</span>:</span>&nbsp;&nbsp;<span class="hljs-default-comment" style="color: rgb(92, 99, 112); background: rgba(0, 0, 0, 0); display: inline; width: 318px; text-decoration-style: solid; text-decoration-color: rgb(92, 99, 112); font-style: italic; word-break: normal !important;"># 获取表单的两个参数VIEWSTATE和<strong>EVENTVALIDATION</strong></span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 19px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">try</span>:<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;soup = BeautifulSoup(html,&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 40px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘lxml’</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;value = soup.select(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 145px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘input[type=”hidden”]’</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;values = [v&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">for</span>&nbsp;v&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">in</span>&nbsp;value&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">if</span>&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘/w’</span>&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">in</span>&nbsp;str(v)]<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;state = values[<span class="hljs-default-number" style="color: rgb(209, 154, 102); background: rgba(0, 0, 0, 0); display: inline; width: 7px; text-decoration-style: solid; text-decoration-color: rgb(209, 154, 102); word-break: normal !important;">0</span>][<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 46px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘value’</span>]<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;action = values[<span class="hljs-default-number" style="color: rgb(209, 154, 102); background: rgba(0, 0, 0, 0); display: inline; width: 6px; text-decoration-style: solid; text-decoration-color: rgb(209, 154, 102); word-break: normal !important;">1</span>][<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 46px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘value’</span>]<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.data[<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 86px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘VIEWSTATE’</span>] = state<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.data[<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 125px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>EVENTVALIDATION’</strong></span>] = action<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 39px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">except</span>&nbsp;IndexError&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 14px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">as</span>&nbsp;e: &nbsp;<span class="hljs-default-comment" style="color: rgb(92, 99, 112); background: rgba(0, 0, 0, 0); display: inline; width: 205px; text-decoration-style: solid; text-decoration-color: rgb(92, 99, 112); font-style: italic; word-break: normal !important;"># 证明这个不是首页，需要另外的规则</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;match = re.search(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 336px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘VIEWSTATE|(.<em>?)|.</em>?<strong>EVENTVALIDATION|(.*?)|‘</strong></span>, html)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.data[<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 86px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘VIEWSTATE’</span>] = match.group(<span class="hljs-default-number" style="color: rgb(209, 154, 102); background: rgba(0, 0, 0, 0); display: inline; width: 7px; text-decoration-style: solid; text-decoration-color: rgb(209, 154, 102); word-break: normal !important;">1</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.data[<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 125px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>EVENTVALIDATION’</strong></span>] = match.group(<span class="hljs-default-number" style="color: rgb(209, 154, 102); background: rgba(0, 0, 0, 0); display: inline; width: 6px; text-decoration-style: solid; text-decoration-color: rgb(209, 154, 102); word-break: normal !important;">2</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 39px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">except</span>&nbsp;Exception&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">as</span>&nbsp;e:<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 72px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘get_value’</span>, e)</code></pre></section><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">这个就是获取两个动态参数的方法，每次根据html元素来获取</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" class="mpa-template" mpa-preserve="t" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; background-image: none; background-color: initial; word-break: normal !important;"><code class="hljs-default" style="margin-right: 0.15em; margin-left: 0.15em; padding: 6px; border-radius: 4px; font-size: 0.85em; background: rgb(40, 44, 52); color: rgb(171, 178, 191); display: block; overflow-x: auto; white-space: nowrap; word-break: normal !important;"><span class="hljs-default-function" style="background: rgba(0, 0, 0, 0); display: inline; width: 231px; text-decoration-style: solid; text-decoration-color: rgb(171, 178, 191); word-break: normal !important;"><span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">def</span>&nbsp;<span class="hljs-default-title" style="color: rgb(97, 174, 238); background: rgba(0, 0, 0, 0); display: inline; width: 66px; text-decoration-style: solid; text-decoration-color: rgb(97, 174, 238); word-break: normal !important;">get_name</span><span class="hljs-default-params" style="background: rgba(0, 0, 0, 0); display: inline; width: 139px; text-decoration-style: solid; text-decoration-color: rgb(171, 178, 191); word-break: normal !important;">(<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">self</span>, jz, html=None)</span></span>: &nbsp;<span class="hljs-default-comment" style="color: rgb(92, 99, 112); background: rgba(0, 0, 0, 0); display: inline; width: 74px; text-decoration-style: solid; text-decoration-color: rgb(92, 99, 112); font-style: italic; word-break: normal !important;"># 输入宿舍号</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">if</span>&nbsp;<span class="hljs-default-symbol" style="color: rgb(97, 174, 238); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(97, 174, 238); word-break: normal !important;">html:</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-comment" style="color: rgb(92, 99, 112); background: rgba(0, 0, 0, 0); display: inline; width: 109px; text-decoration-style: solid; text-decoration-color: rgb(92, 99, 112); font-style: italic; word-break: normal !important;"># 表单顺序需要改变</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">self</span>.data = {<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 106px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘ScriptManager1’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 139px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘UpdatePanel1|txtjz2’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 60px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘hidtime’</span>: datetime.now().strftime(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 126px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘%Y-%m-%d %H:%M:%S’</span>),<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 53px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘Radio1’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘1’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 53px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘txtjz2’</span>: jz,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 66px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘txtname2’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 112px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘001001001001001’</span>, &nbsp;<span class="hljs-default-comment" style="color: rgb(92, 99, 112); background: rgba(0, 0, 0, 0); display: inline; width: 206px; text-decoration-style: solid; text-decoration-color: rgb(92, 99, 112); font-style: italic; word-break: normal !important;"># 这个初始化值可以随意，但不能为空</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 60px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘txtpwd2’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 60px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘txtyzm2’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 99px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>EVENTTARGET’</strong></span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 52px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘txtjz2’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 113px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘EVENTARGUMENT’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 86px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>LASTFOCUS’</strong></span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 14px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 86px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘VIEWSTATE’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 14px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 126px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<strong>EVENTVALIDATION’</strong></span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘’</span>,<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 86px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘ASYNCPOST’</span>:&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 40px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘true’</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">self</span>.<strong>get_value(html) &nbsp;<span class="hljs-default-comment" style="color: rgb(92, 99, 112); background: rgba(0, 0, 0, 0); display: inline; width: 62px; text-decoration-style: solid; text-decoration-color: rgb(92, 99, 112); font-style: italic; word-break: normal !important;"># 换下参数</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;html =&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 27px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">self</span>.</strong>get_html()<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">if</span>&nbsp;<span class="hljs-default-symbol" style="color: rgb(97, 174, 238); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(97, 174, 238); word-break: normal !important;">html:</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;soup = BeautifulSoup(html,&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 40px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘lxml’</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dormitory_num = soup.select(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 211px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘select[name=”txtname2”] option’</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dormitory_num = [(p.text, p[<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 46px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘value’</span>])&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">for</span>&nbsp;p&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">in</span>&nbsp;dormitory_num]<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">for</span>&nbsp;index, p&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">in</span>&nbsp;enumerate(dormitory_num):<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(index,&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 61px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘宿舍号：’</span>, p[<span class="hljs-default-number" style="color: rgb(209, 154, 102); background: rgba(0, 0, 0, 0); display: inline; width: 7px; text-decoration-style: solid; text-decoration-color: rgb(209, 154, 102); word-break: normal !important;">0</span>])<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 27px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">self</span>.<strong>get_value(html)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">while</span>&nbsp;<span class="hljs-default-symbol" style="color: rgb(97, 174, 238); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(97, 174, 238); word-break: normal !important;">True:</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num = input(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 217px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘请输入你的宿舍，输入左边的编号即可’</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num = re.match(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘\d+’</span>, num)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">if</span>&nbsp;num&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 20px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">and</span>&nbsp;int(num.group()) &lt; len(dormitory_num):<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num = int(num.group())<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">break</span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 133px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘请输入正确的宿舍编号’</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 39px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">return</span>&nbsp;dormitory_num[num][<span class="hljs-default-number" style="color: rgb(209, 154, 102); background: rgba(0, 0, 0, 0); display: inline; width: 7px; text-decoration-style: solid; text-decoration-color: rgb(209, 154, 102); word-break: normal !important;">1</span>]</strong></code></pre></section><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">这个是获取宿舍号，表单顺序需要改变</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" class="mpa-template" mpa-preserve="t" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; background-image: none; background-color: initial; word-break: normal !important;"><code class="hljs-default" style="margin-right: 0.15em; margin-left: 0.15em; padding: 6px; border-radius: 4px; font-size: 0.85em; background: rgb(40, 44, 52); color: rgb(171, 178, 191); display: block; overflow-x: auto; white-space: nowrap; word-break: normal !important;">def get_chapter(self):<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;# 获取验证码<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;url =&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 284px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘<a href="http://172.18.2.42:8000/ValidateCode.aspx&#39;" target="_blank" rel="noopener">http://172.18.2.42:8000/ValidateCode.aspx&#39;</a></span><br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;response = requests.<span class="hljs-default-built_in" style="color: rgb(230, 192, 123); background: rgba(0, 0, 0, 0); display: inline; width: 19px; text-decoration-style: solid; text-decoration-color: rgb(230, 192, 123); word-break: normal !important;">get</span>(url, headers=self.headers)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;with&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">open</span>(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 66px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘code.jpg’</span>,&nbsp;<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘wb’</span>)&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 13px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">as</span>&nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 7px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">f</span>:<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 7px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">f</span>.<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">write</span>(response.content)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;image = Image.<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 26px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">open</span>(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 66px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘code.jpg’</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;image.show()<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;code =&nbsp;<span class="hljs-default-built_in" style="color: rgb(230, 192, 123); background: rgba(0, 0, 0, 0); display: inline; width: 33px; text-decoration-style: solid; text-decoration-color: rgb(230, 192, 123); word-break: normal !important;">input</span>(<span class="hljs-default-string" style="color: rgb(152, 195, 121); background: rgba(0, 0, 0, 0); display: inline; width: 86px; text-decoration-style: solid; text-decoration-color: rgb(152, 195, 121); word-break: normal !important;">‘请输入验证码’</span>)<br style="word-break: normal !important;">&nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-default-keyword" style="color: rgb(198, 120, 221); background: rgba(0, 0, 0, 0); display: inline; width: 39px; text-decoration-style: solid; text-decoration-color: rgb(198, 120, 221); word-break: normal !important;">return</span>&nbsp;code</code></pre></section><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">这个是获取验证码的方法，获取验证码是很简单的，就是找到请求的url进行请求就可以了。至于识别，我这里是手动输入，你也可以选择接入打码平台或者用深度学习模型来识别。</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">其他的就不多说了。</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">需要源码的可以在我的GitHub上找：<a href="https://github.com/SergioJune/gongzhonghao_code/blob/master/python_play/query.py" target="_blank" rel="noopener">https://github.com/SergioJune/gongzhonghao_code/blob/master/python_play/query.py</a></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><span style="font-size: 20px; word-break: normal !important;"><strong style="word-break: normal !important;">写在最后</strong></span></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><span style="color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif; font-size: 17px; letter-spacing: 1.5px; text-align: justify; word-break: normal !important;">如果这篇文章对你用的话，希望不要吝啬你的点赞哈！点赞和转发就是对我的最大支持，这样才有动力输出质量高的原创文章。</span></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><span style=";color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif; font-size: 17px; letter-spacing: 1.5px; text-align: justify; word-break: normal !important;;word-break: normal !important;">「点赞是一种态度！」</span></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;">推荐文章：</p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483795&amp;idx=1&amp;sn=0b263fc29538db3de5ffe25da0c8bd49&amp;chksm=fb4a7b3fcc3df229ccc9f2ad10fdcbf47e9a1f61012c4ee64a5fcd3a56897f7ba9998fac298c&amp;scene=21#wechat_redirect" target="_blank" style="word-break: normal !important;" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483795&amp;idx=1&amp;sn=0b263fc29538db3de5ffe25da0c8bd49&amp;chksm=fb4a7b3fcc3df229ccc9f2ad10fdcbf47e9a1f61012c4ee64a5fcd3a56897f7ba9998fac298c&amp;scene=21#wechat_redirect">我爬取了37000条球迷评论，知道了这场比赛的重要信息</a><a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483760&amp;idx=1&amp;sn=3e08dbc95596839abe1c84752453415f&amp;chksm=fb4a7bdccc3df2cae9f3b4df5b410017b72d62a4c26a70d8d7afb4294024928bc5d53572368a&amp;scene=21#wechat_redirect" target="_blank" style="word-break: normal !important;" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483760&amp;idx=1&amp;sn=3e08dbc95596839abe1c84752453415f&amp;chksm=fb4a7bdccc3df2cae9f3b4df5b410017b72d62a4c26a70d8d7afb4294024928bc5d53572368a&amp;scene=21#wechat_redirect">爬取《The Hitchhiker’s Guide to Python!》python进阶书并制成pdf</a><br style="word-break: normal !important;"></p><p style="margin-right: 1em; margin-left: 1em; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; letter-spacing: 1px; word-break: normal !important;"><br></p><p style="white-space: normal; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif; font-size: 17px; letter-spacing: 0.544px; text-align: center; word-break: normal !important;"><img data-copyright="0" data-s="300,640" _width="26%" src="https://mmbiz.qpic.cn/mmbiz_jpg/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUibICOVW7ziao5o8nCHYeqSJXIC0TKxqQgHibtaBKl4waRIZVPD4DaE8cg/640" data-fail="0" style="width: 173.672px; word-break: normal !important; visibility: visible !important;" _src="https://mmbiz.qpic.cn/mmbiz_jpg/BIPpxEvceWicMYDKfP5R5OTlibqRibxgnbUibICOVW7ziao5o8nCHYeqSJXIC0TKxqQgHibtaBKl4waRIZVPD4DaE8cg/640"></p><p style="padding-right: 5px; padding-left: 5px; white-space: normal; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif; font-size: 17px; letter-spacing: 0.544px; text-align: center; word-break: normal !important;"><span style="font-size: 14px; word-break: normal !important;">日常学python</span></p><p style="padding-right: 5px; padding-left: 5px; white-space: normal; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif; font-size: 17px; letter-spacing: 0.544px; text-align: center; word-break: normal !important;"><span style="font-size: 14px; word-break: normal !important;">代码不止bug，还有美和乐趣</span></p><p><br></p></div><p class="readmore"><a href="/2018/08/07/如何爬取asp动态网页？搞定可恶的动态参数，这一文告诉你！/">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/07/爬取《The Hitchhiker’s Guide to Python!》python进阶书并制成pdf/">爬取《The Hitchhiker’s Guide to Python!》python进阶书并制成pdf</a></h2><div class="post-meta"><p><span class="date">2018-08-07</span><span><a href="/categories/python/" class="category">python</a></span></p></div><div class="post-content"><p><section class="_editor"><p class="_brush" style="margin: 0px auto; max-width: 600px; word-wrap: normal; min-height: 1em; border: 1px solid rgb(95, 170, 255); font-family: 微软雅黑; font-size: 12px; border-radius: 2em; box-sizing: border-box !important; text-align: center;"><span style="color: rgb(255, 0, 0);">这是日常学python的第15篇原创文章</span></p></section></p><p data-mpa-powered-by="yiban.io" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">前几篇文章我们学习了requests库和正则，还有个urllib库，我上篇文章也用了requests库来教大家去爬那些返回json格式的网页，挺好玩的。有读者让我来个正则的，所以我今天就来个正则+requests来进行爬取。<br style="word-break: normal !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">今天原来是想爬小说的，但想到我不怎么看小说，读者也是都喜欢学习的，对吧？嘻嘻！所以我来爬个与python相关的内容，恰好前几天我又看到别人推荐的一本python进阶书，这本书的作者是我们的python大神<strong style="word-break: normal !important;"><span style="color: rgb(102, 102, 102); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 20px; word-break: normal !important;">kennethreitz</span></strong>征集各路爱好python的人所写的，下面是地址：</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">中文版:<a href="http://pythonguidecn.readthedocs.io/zh/latest/" _src="http://pythonguidecn.readthedocs.io/zh/latest/" _href="http://pythonguidecn.readthedocs.io/zh/latest/" style="word-break: normal !important;" target="_blank" rel="noopener">http://pythonguidecn.readthedocs.io/zh/latest/</a></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">英文版：<a href="http://docs.python-guide.org/en/latest/" _src="http://docs.python-guide.org/en/latest/" _href="http://docs.python-guide.org/en/latest/" style="word-break: normal !important;" target="_blank" rel="noopener">http://docs.python-guide.org/en/latest/</a></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">这本书适合于一切有python的学习者，不管你是初入python的小白，还是熟练使用python的老手，都适用。但是不看也没有影响你学习爬虫哈，这个只是说些python的奇淫技巧。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">由于这本书在网上只有英语的电子版，可我英语渣渣，所以爬个中文版的网页然后把他弄成电子版。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">若想直接获取该书电子版，可以在公众号「<strong style="word-break: normal !important;">日常学python</strong>」后台回复『<strong style="word-break: normal !important;">进阶</strong>』直接获取。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">本篇文章用到的工具如下：</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; letter-spacing: 0px; white-space: normal; line-height: 1.6; word-break: normal !important;"><ul class=" list-paddingleft-2" style="width: 530.094px; word-break: normal !important; margin: 0px; padding: 0px 0px 0px 30px;"><li><p style="word-break: normal !important;"><strong style="word-break: normal !important;">requests库</strong></p></li><li><p style="word-break: normal !important;"><strong style="word-break: normal !important;">正则表达式</strong></p></li><li><p style="word-break: normal !important;"><strong style="word-break: normal !important;">Sigil</strong>：将html网页转成epub电子书</p></li><li><p style="word-break: normal !important;"><strong style="word-break: normal !important;">epub转pdf</strong>:<a href="http://cn.epubee.com/epub转pdf.html" target="_blank" rel="noopener">http://cn.epubee.com/epub转pdf.html</a><br style="word-break: normal !important;"></p></li></ul></section><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><strong style="word-break: normal !important;">好了，下面详细分析：</strong></p><section class="_editor" style="max-width: 100%; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><section style="margin: 10px auto; padding: 2px; word-break: normal !important; box-sizing: border-box;"><section style="width: 60px; height: 40px; text-align: center; font-size: 2em; color: rgb(255, 255, 255); float: left; line-height: 40px; background-image: linear-gradient(-45deg, transparent 14.14px, rgb(139, 183, 72) 0px), linear-gradient(45deg, transparent 14.14px, rgb(139, 183, 72) 0px), linear-gradient(135deg, transparent 14.14px, rgb(139, 183, 72) 0px), linear-gradient(-135deg, transparent 14.14px, rgb(139, 183, 72) 0px); background-position: right bottom, left bottom, left top, right top; background-size: 50% 50%, 50% 50%, 50% 50%, 50% 50%; background-repeat: no-repeat, no-repeat, no-repeat, no-repeat; word-break: normal !important;"><section class="autonum" style="word-break: normal !important;">1</section></section><section style="margin-left: 10px; border-bottom: 2px dashed rgb(128, 177, 53); min-height: 36px; display: inline-block; line-height: 36px; word-break: normal !important; box-sizing: border-box;"><span style="color: rgb(128, 177, 53); font-size: 18px; display: inline-block; word-break: normal !important;">分析网站内容</span></section></section></section><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekQP06iabibiaSu5twxzVnFicarWIYUnF7lr20VbEic0jFxiaWce15kBYsWYvg/" data-ratio="0.6265822784810127" data-w="1264" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekQP06iabibiaSu5twxzVnFicarWIYUnF7lr20VbEic0jFxiaWce15kBYsWYvg/" style="word-break: normal !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">可以看到首页中有整本书的内容链接，所以可以直接爬首页获取整本书的链接。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">熟练地按下f12查看网页请求，非常容易找到这个<img data-s="300,640" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekf25ibXK48962V3vGIeK6x34wDWuUqCNfhyx2XSIdpf8U9tXFzxJCDoA/" data-ratio="0.4616171954964176" data-w="977" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekf25ibXK48962V3vGIeK6x34wDWuUqCNfhyx2XSIdpf8U9tXFzxJCDoA/" style="word-break: normal !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">请求网站为：<span style="color: rgb(34, 34, 34); font-family: Consolas, 'Lucida Console', 'Courier New', monospace; font-size: 12px; white-space: pre-wrap; word-break: normal !important;"><a href="http://pythonguidecn.readthedocs.io/zh/latest/" _src="http://pythonguidecn.readthedocs.io/zh/latest/" _href="http://pythonguidecn.readthedocs.io/zh/latest/" style="word-break: normal !important;" target="_blank" rel="noopener">http://pythonguidecn.readthedocs.io/zh/latest/</a></span></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">请求方式为get，状态码为200，而且返回的是html元素，所以我们可以用正则来匹配所需要的内容。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">那看看我们的匹配内容所在的地方</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekaeZxH9TWHCA2WXDuHUNmgSm6dBIEBMd8daYtyfsotOibibRfZ6RKm3IQ/" data-ratio="0.4064885496183206" data-w="1572" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekaeZxH9TWHCA2WXDuHUNmgSm6dBIEBMd8daYtyfsotOibibRfZ6RKm3IQ/" style="word-break: normal !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">可以看到这个内容的地址和内容标题都在这个a标签上，所以正则很容易，如下：</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; letter-spacing: 0px; white-space: normal; line-height: 1.6; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; color: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); background: rgb(40, 43, 46); word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;">toctree-l1.<em>?reference internal<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">“ href=”</span>([^<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">“]</span></em>?)”&gt;(.<em>?)&lt;/a&gt;<br style="word-break: normal !important;"></em></code></pre></section><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">不知道你的正则学得怎样了，这里还是简单说下：</p><ul class=" list-paddingleft-2" style="width: 530.094px; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important; margin: 0px; padding: 0px 0px 0px 30px;"><li><p style="word-break: normal !important;"><strong style="word-break: normal !important;">.</strong>：这个是概括字符集，为匹配除换行符以外的任意字符</p></li><li><p style="word-break: normal !important;"><strong style="word-break: normal !important;"></strong>：这个是数量词，匹配的次数为0次以上</p></li><li><p style="word-break: normal !important;"><strong style="word-break: normal !important;">?</strong>：加了这个问号表示非贪婪，一般默认为贪婪</p></li><li><p style="word-break: normal !important;"><strong style="word-break: normal !important;">[^”]</strong>：这个表示不匹配双引号，挺好用的</p></li></ul><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">实在不记得的可以看看我这篇文章，这里不详细说了,不记得就点开<a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483729&amp;idx=1&amp;sn=3af71892e67f9dd93e8e4dabc98c76b1&amp;chksm=fb4a7bfdcc3df2eb60858642aa905b5b5fccdafd100e9af1099b268e4ccb5b72170e19299423&amp;scene=21#wechat_redirect" target="_blank" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483729&amp;idx=1&amp;sn=3af71892e67f9dd93e8e4dabc98c76b1&amp;chksm=fb4a7bfdcc3df2eb60858642aa905b5b5fccdafd100e9af1099b268e4ccb5b72170e19299423&amp;scene=21#wechat_redirect" style="word-break: normal !important;">爬虫必学知识之正则表达式下篇</a>看看</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">这里需要注意的是：在这里获取的网址列表里面有个内容的导航，如下：<img src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekfhGeWs4PLqY6Sbp9BksZutMhKW5FmWqpEvrRLljga5hhbib8b82VB0Q/" title="1522224025709350.png" alt="image.png" class="js_catchremoteimageerror" data-cropselx1="0" data-cropselx2="497" data-cropsely1="0" data-cropsely2="326" data-copyright="0" data-ratio="0.40766961651917405" data-w="1695" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekfhGeWs4PLqY6Sbp9BksZutMhKW5FmWqpEvrRLljga5hhbib8b82VB0Q/" style="height: 227px; width: 558px; word-break: normal !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">所有我们在匹配完之后还需要再将这些带<strong style="word-break: normal !important;">#</strong>号的网址给过滤掉。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">接下来的就是获取每个网页的内容</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAek8KclyX0V4g3J6ytibeSVGBs5xgZrx5Qhk86ThaiaG6DibCtttv6MmVMOw/" data-ratio="0.15073529411764705" data-w="1632" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAek8KclyX0V4g3J6ytibeSVGBs5xgZrx5Qhk86ThaiaG6DibCtttv6MmVMOw/" style="word-break: normal !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">可以看到内容都在这个div标签内，所以和上面一样，用正则就可以获取了。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">ps: 其实这里用BeautifulSoup更好用，我会在后面文章中讲到哈！</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">匹配内容的正则为：</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; letter-spacing: 0px; white-space: normal; line-height: 1.6; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; color: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); background: rgb(40, 43, 46); word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;">section<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">“.<em>?(&lt;h1&gt;.</em>?)&lt;div class=”</span>sphinxsidebar<br style="word-break: normal !important;"></code></pre></section><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">因为我的那个工具是把这些内容的html下载下来就可以了，所以接下来不需要清洗里面的html元素。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">内容分析完毕，接下来的就容易了，就是用个循环把遍历所有文章，然后就利用正则把他爬下来就可以了。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><section class="_editor" style="max-width: 100%; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><section style="margin: 10px auto; padding: 2px; word-break: normal !important; box-sizing: border-box;"><section style="width: 60px; height: 40px; text-align: center; font-size: 2em; color: rgb(255, 255, 255); float: left; line-height: 40px; background-image: linear-gradient(-45deg, transparent 14.14px, rgb(139, 183, 72) 0px), linear-gradient(45deg, transparent 14.14px, rgb(139, 183, 72) 0px), linear-gradient(135deg, transparent 14.14px, rgb(139, 183, 72) 0px), linear-gradient(-135deg, transparent 14.14px, rgb(139, 183, 72) 0px); background-position: right bottom, left bottom, left top, right top; background-size: 50% 50%, 50% 50%, 50% 50%, 50% 50%; background-repeat: no-repeat, no-repeat, no-repeat, no-repeat; word-break: normal !important;"><section class="autonum" style="word-break: normal !important;">2</section></section><section style="margin-left: 10px; border-bottom: 2px dashed rgb(128, 177, 53); min-height: 36px; display: inline-block; line-height: 36px; word-break: normal !important; box-sizing: border-box;"><span style="color: rgb(128, 177, 53); font-size: 18px; display: inline-block; word-break: normal !important;">实操部分</span></section></section></section><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; letter-spacing: 0px; white-space: normal; line-height: 1.6; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; color: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); background: rgb(40, 43, 46); word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">import</span> re, requests<br style="word-break: normal !important;"><br style="word-break: normal !important;"><span class="hljs-class" style="font-size: inherit; color: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">class</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important;">Spider</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important;">(object)</span>:</span><br style="word-break: normal !important;"> &nbsp; &nbsp;<span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important;"><strong>init</strong></span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important;">(self, headers, url)</span>:</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;self.headers = headers<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;self.url = url<br style="word-break: normal !important;"><br style="word-break: normal !important;"> &nbsp; &nbsp;<span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important;"><strong>get_hrefs</strong></span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important;">(self)</span>:</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘’’获取书本的所有链接’’’</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;response = requests.get(self.url, self.headers)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">if</span> response.status_code == <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important;">200</span>:<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;response.encoding = <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘utf-8’</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hrefs = re.findall(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘toctree-l1.<em>?reference internal” href=”([^”]</em>?)”&gt;(.*?)&lt;/a&gt;’</span>, response.text, re.S)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">return</span> hrefs<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">else</span>:<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘访问书本内容失败，状态码为’</span>, response.status_code)<br style="word-break: normal !important;"><br style="word-break: normal !important;"> &nbsp; &nbsp;<span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important;">get_page</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important;">(self, url)</span>:</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘’’获取首页’’’</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;response = requests.get(url, self.headers)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;response.encoding = <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘utf-8’</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;content = re.findall(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘section”.<em>?(&lt;h1&gt;.</em>?)&lt;div class=”sphinxsidebar’</span>, response.text, re.S)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">return</span> content[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important;">0</span>]<br style="word-break: normal !important;"><br style="word-break: normal !important;"> &nbsp; &nbsp;<span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important;"><strong>get_content</strong></span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important;">(self, href)</span>:</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘’’获取每个页面的内容’’’</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">if</span> href:<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;href = self.url + href<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;response = requests.get(href, self.headers)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;response.encoding = <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘utf-8’</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;content = re.findall(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘section”.<em>?(&lt;h1&gt;.</em>?)&lt;div class=”sphinxsidebar’</span>, response.text, re.S)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">if</span> content:<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">return</span> content[<span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important;">0</span>]<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">else</span>:<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘正则获取失败’</span>)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">else</span>:<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘获取内容失败’</span>)<br style="word-break: normal !important;"><br style="word-break: normal !important;"> &nbsp; &nbsp;<span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important;">run</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important;">(self)</span>:</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘’’循环获取整本书内容’’’</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;self.num = <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important;">0</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;hrefs = self.get_hrefs()<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;content = self.<strong>get_page(self.url)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">with</span> open(str(self.num)+<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘Python最佳实践指南.html’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘w’</span>, encoding=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘utf-8’</span>) <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">as</span> f:<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;f.write(content)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘写入目录成功’</span>)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">for</span> href, title <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">in</span> hrefs:<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">if</span> <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">“#”</span> <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">in</span> href:<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">continue</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.num += <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important;">1</span><br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;content = self.</strong>get_content(href)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">with</span> open(str(self.num)+title+<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘.html’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘w’</span>, encoding=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘utf-8’</span>) <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">as</span> f:<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;f.write(content)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘下载第’</span>+str(self.num)+<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘章成功’</span>)<br style="word-break: normal !important;"> &nbsp; &nbsp; &nbsp; &nbsp;print(<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘下载完毕’</span>)<br style="word-break: normal !important;"><br style="word-break: normal !important;"><br style="word-break: normal !important;"><span class="hljs-function" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; word-wrap: inherit !important; word-break: inherit !important;">def</span> <span class="hljs-title" style="font-size: inherit; line-height: inherit; color: rgb(165, 218, 45); word-wrap: inherit !important; word-break: inherit !important;">main</span><span class="hljs-params" style="font-size: inherit; line-height: inherit; color: rgb(255, 152, 35); word-wrap: inherit !important; word-break: inherit !important;">()</span>:</span><br style="word-break: normal !important;"> &nbsp; &nbsp;url = <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘<a href="http://pythonguidecn.readthedocs.io/zh/latest/&#39;" target="_blank" rel="noopener">http://pythonguidecn.readthedocs.io/zh/latest/&#39;</a></span><br style="word-break: normal !important;"> &nbsp; &nbsp;headers = {<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘User-Agent’</span>:<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36’</span>}<br style="word-break: normal !important;"> &nbsp; &nbsp;spider = Spider(headers, url)<br style="word-break: normal !important;"> &nbsp; &nbsp;spider.run()<br style="word-break: normal !important;"><br style="word-break: normal !important;"><br style="word-break: normal !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">if</span> <strong>name</strong> == <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘<strong>main</strong>‘</span>:<br style="word-break: normal !important;"> &nbsp; &nbsp;main()<br style="word-break: normal !important;"></code></pre></section><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">点击运行，感觉美滋滋，可惜啊，代码总是爱玩弄你，赶紧报了个错：</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; letter-spacing: 0px; white-space: normal; line-height: 1.6; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; color: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); background: rgb(40, 43, 46); word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;"> &nbsp;File <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">“E:/anaconda/python_project/newspaper/spider.py”</span>, line <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important;">52</span>, <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">in</span> run<br style="word-break: normal !important;"> &nbsp; &nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">with</span> open(str(self.num)+title+<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘.html’</span>, <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘w’</span>, encoding=<span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘utf-8’</span>) <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">as</span> f:<br style="word-break: normal !important;">FileNotFoundError: [Errno <span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important;">2</span>] No such file <span class="hljs-keyword" style="font-size: inherit; line-height: inherit; color: rgb(248, 35, 117); word-wrap: inherit !important; word-break: inherit !important;">or</span> directory: <span class="hljs-string" style="font-size: inherit; line-height: inherit; color: rgb(238, 220, 112); word-wrap: inherit !important; word-break: inherit !important;">‘38与C/C++库交互.html’</span><br style="word-break: normal !important;"></code></pre></section><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">一眼看下去，还挺郁闷的，我没有打开文件的，都是在写文件，为什么报了这个错？仔细一看报错内容，这个名字有问题啊，你看</p><section class="output_wrapper" id="output_wrapper_id" style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; letter-spacing: 0px; white-space: normal; line-height: 1.6; word-break: normal !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-size: inherit; color: inherit; line-height: inherit; word-break: normal !important;"><code class="python language-python hljs" style="margin-right: 2px; margin-left: 2px; padding: 0.5em; line-height: 18px; font-size: 14px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; color: rgb(169, 183, 198); background: rgb(40, 43, 46); word-wrap: normal !important; word-break: normal !important; display: block !important; overflow: auto !important;"><span class="hljs-number" style="font-size: inherit; line-height: inherit; color: rgb(174, 135, 250); word-wrap: inherit !important; word-break: inherit !important;">38</span>与C/C++库交互.html<br style="word-break: normal !important;"></code></pre></section><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">这个在window系统是以为你在&nbsp;<strong style="word-break: normal !important;">38与C</strong>&nbsp;的<strong style="word-break: normal !important;">&nbsp;C++库交互.html&nbsp;</strong>下的，怪不得会报错，所以，我在这里加了这个代码把/给替换掉<img src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekwK0y8nM79sjxAQHpArFGWFncdofyMHZgYLJcgibUx1XbpBibTcckULBw/" title="1522225665219209.png" alt="image.png" class="js_catchremoteimageerror" data-cropselx1="0" data-cropselx2="497" data-cropsely1="0" data-cropsely2="326" data-copyright="0" data-ratio="0.3460820895522388" data-w="1072" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekwK0y8nM79sjxAQHpArFGWFncdofyMHZgYLJcgibUx1XbpBibTcckULBw/" style="height: 193px; width: 558px; word-break: normal !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><section class="_editor" style="max-width: 100%; color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><section style="margin: 10px auto; padding: 2px; word-break: normal !important; box-sizing: border-box;"><section style="width: 60px; height: 40px; text-align: center; font-size: 2em; color: rgb(255, 255, 255); float: left; line-height: 40px; background-image: linear-gradient(-45deg, transparent 14.14px, rgb(139, 183, 72) 0px), linear-gradient(45deg, transparent 14.14px, rgb(139, 183, 72) 0px), linear-gradient(135deg, transparent 14.14px, rgb(139, 183, 72) 0px), linear-gradient(-135deg, transparent 14.14px, rgb(139, 183, 72) 0px); background-position: right bottom, left bottom, left top, right top; background-size: 50% 50%, 50% 50%, 50% 50%, 50% 50%; background-repeat: no-repeat, no-repeat, no-repeat, no-repeat; word-break: normal !important;"><section class="autonum" style="word-break: normal !important;">3</section></section><section style="margin-left: 10px; border-bottom: 2px dashed rgb(128, 177, 53); min-height: 36px; display: inline-block; line-height: 36px; word-break: normal !important; box-sizing: border-box;"><span style="color: rgb(128, 177, 53); font-size: 18px; display: inline-block; word-break: normal !important;">把内容整成pdf</span></section></section></section><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">点击Sigil 的<strong style="word-break: normal !important;">&nbsp;+</strong>&nbsp;号把刚才下载的内容导入</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAek7OUGXbiayb6u4RxsP5xsAxqwmiaCRNNmuxgpek35ltF3RyfUc4NtIGBw/" data-ratio="0.6259541984732825" data-w="393" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAek7OUGXbiayb6u4RxsP5xsAxqwmiaCRNNmuxgpek35ltF3RyfUc4NtIGBw/" style="word-break: normal !important;"><img data-s="300,640" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekVSQEW1Do07g9NyZ8Zy8g8y8ic4aFMl8XjkQFLzDAG2VnBnQlsD3CKdg/" data-ratio="0.7363057324840764" data-w="785" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekVSQEW1Do07g9NyZ8Zy8g8y8ic4aFMl8XjkQFLzDAG2VnBnQlsD3CKdg/" style="word-break: normal !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">生成目录</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekRNl96soJiccrkyJRQVnCuN56A7aj7fTib9nVhyRwXw1UkmAicbgLWiaDvA/" data-ratio="0.5648351648351648" data-w="455" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekRNl96soJiccrkyJRQVnCuN56A7aj7fTib9nVhyRwXw1UkmAicbgLWiaDvA/" style="word-break: normal !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">添加书名作者</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><img data-s="300,640" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekkx3V7BObvpJoCsDEyCn9ZLmEJ6tRunD0RhkZm9EAoGVjg4CF2FnptA/" data-ratio="1.150214592274678" data-w="233" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAekkx3V7BObvpJoCsDEyCn9ZLmEJ6tRunD0RhkZm9EAoGVjg4CF2FnptA/" style="word-break: normal !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">添加封面：点击左上角的&nbsp;<strong style="word-break: normal !important;">工具</strong>&nbsp;-&gt;&nbsp;<strong style="word-break: normal !important;">添加封面&nbsp;</strong>即可</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">点击保存即可完成</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">转pdf：<a href="http://cn.epubee.com/epub%E8%BD%ACpdf.html" _src="http://cn.epubee.com/epub转pdf.html" _href="http://cn.epubee.com/epub%E8%BD%ACpdf.html" style="word-break: normal !important;" target="_blank" rel="noopener">http://cn.epubee.com/epub转pdf.html</a></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">这个很容易就不说了。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><strong style="word-break: normal !important;">结语</strong></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">好了，文章内容就这么多，下个文章就是学习新内容了。期待ing。</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;">上述文章如有错误欢迎在留言区指出，如果这篇文章对你有用，点个赞，转个发如何？</p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><section style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><section style="word-break: normal !important;"><section style="padding-right: 8px; padding-left: 8px; height: 35px; display: inline-block; border-top: 1px solid rgb(0, 0, 0); border-right: 1px solid rgb(0, 0, 0); border-bottom: 1px solid rgb(0, 0, 0); font-weight: bold; line-height: 35px; vertical-align: middle; word-break: normal !important; box-sizing: border-box;">MORE</section><section style="padding-right: 8px; padding-left: 8px; height: 35px; display: inline-block; border-top: 1px solid rgb(0, 0, 0); border-bottom: 1px solid rgb(0, 0, 0); line-height: 35px; vertical-align: middle; word-break: normal !important; box-sizing: border-box;">延伸阅读</section><section style="padding-right: 15px; padding-left: 15px; line-height: 2em; word-break: normal !important; box-sizing: border-box;"><p style="word-break: normal !important;"><span style="text-decoration-line: underline; word-break: normal !important;">◐◑<a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483740&amp;idx=1&amp;sn=9c62ebf1b4d284159a0500f060cb4527&amp;chksm=fb4a7bf0cc3df2e6d504c4a32d9a6e51828b5961b31ef6da81fcab8cf1b6df64bb8a99894fe3&amp;scene=21#wechat_redirect" target="_blank" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483740&amp;idx=1&amp;sn=9c62ebf1b4d284159a0500f060cb4527&amp;chksm=fb4a7bf0cc3df2e6d504c4a32d9a6e51828b5961b31ef6da81fcab8cf1b6df64bb8a99894fe3&amp;scene=21#wechat_redirect" style="word-break: normal !important;">老司机带你用python来爬取妹子图</a></span></p><p style="word-break: normal !important;"><span style="text-decoration-line: underline; word-break: normal !important;">◐◑&nbsp;<a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483720&amp;idx=1&amp;sn=4567a228e1bcca2dcb4c23f0feac39b3&amp;chksm=fb4a7be4cc3df2f234c5b7102f107e72df42a24575dd5d735fb203dddf02ca6e2d3b2b41ce28&amp;scene=21#wechat_redirect" target="_blank" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483720&amp;idx=1&amp;sn=4567a228e1bcca2dcb4c23f0feac39b3&amp;chksm=fb4a7be4cc3df2f234c5b7102f107e72df42a24575dd5d735fb203dddf02ca6e2d3b2b41ce28&amp;scene=21#wechat_redirect" style="word-break: normal !important;">python爬虫常用库之requests详解</a></span></p><p style="word-break: normal !important;"><span style="text-decoration-line: underline; word-break: normal !important;">◐◑&nbsp;<a href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483729&amp;idx=1&amp;sn=3af71892e67f9dd93e8e4dabc98c76b1&amp;chksm=fb4a7bfdcc3df2eb60858642aa905b5b5fccdafd100e9af1099b268e4ccb5b72170e19299423&amp;scene=21#wechat_redirect" target="_blank" _href="http://mp.weixin.qq.com/s?__biz=MzU0NzY0NzQyNw==&amp;mid=2247483729&amp;idx=1&amp;sn=3af71892e67f9dd93e8e4dabc98c76b1&amp;chksm=fb4a7bfdcc3df2eb60858642aa905b5b5fccdafd100e9af1099b268e4ccb5b72170e19299423&amp;scene=21#wechat_redirect" style="word-break: normal !important;">爬虫必学知识之正则表达式下篇</a></span></p></section></section></section><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; text-align: center; word-break: normal !important;"><img src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAek5e3TsAvnGe7QiblyTForFQco8GHiaPBL6YPQ7WPRyl8jpmz6J5PWG2qQ/" height="auto" border="0" alt="1802109804.png" title="undefined" data-ratio="1" data-w="261" data-type="png" _src="https://mmbiz.qpic.cn/mmbiz_png/BIPpxEvceWicsXUMNOjV3Lo1PYrSUibAek5e3TsAvnGe7QiblyTForFQco8GHiaPBL6YPQ7WPRyl8jpmz6J5PWG2qQ/" style="margin-bottom: 1.4px; border-radius: 5px; border-width: 1px; border-style: dashed; border-color: rgb(168, 164, 171); box-shadow: rgba(0, 0, 0, 0.33) 6px 6px 5px 0px; word-break: normal !important; visibility: visible !important; width: 111.297px !important;"></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; text-align: center; word-break: normal !important;"><br></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; text-align: center; word-break: normal !important;"><span style="font-size: 14px; word-break: normal !important;">日常学python</span></p><p style="color: rgb(0, 0, 0); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: medium; white-space: normal; text-align: center; word-break: normal !important;"><span style="font-size: 14px; word-break: normal !important;">代码不止bug，还有美和乐趣</span></p><p><br></p><p></p></div><p class="readmore"><a href="/2018/08/07/爬取《The Hitchhiker’s Guide to Python!》python进阶书并制成pdf/">阅读更多</a></p></div><nav class="page-navigator"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">下一页</a></nav></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/08/07/python3.x爬取网易云音乐评论/">利用python爬取网易云音乐评论，并把数据存入mysql</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/07/hexo搭建的博客提交文章本地预览成功但github没有显示解决方法/">hexo搭建的博客提交文章本地预览成功但github没有显示解决方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/07/学习用python操作mysql/">学习用python操作mysql</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/07/我爬取了37000条球迷评论，知道了这场比赛的重要信息/">我爬取了37000条球迷评论，知道了这场比赛的重要信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/07/谈谈如何抓取ajax动态网站/">谈谈如何抓取ajax动态网站</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/07/说说数据库/">说说数据库</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/07/使用requests+BeautifulSoup的简单爬虫练习/">使用requests+BeautifulSoup的简单爬虫练习</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/07/入门mysql数据库/">入门mysql数据库</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/07/如何爬取asp动态网页？搞定可恶的动态参数，这一文告诉你！/">如何爬取asp动态网页？搞定可恶的动态参数，这一文告诉你！</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/07/爬取《The Hitchhiker’s Guide to Python!》python进阶书并制成pdf/">爬取《The Hitchhiker’s Guide to Python!》python进阶书并制成pdf</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">17</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/python/数据库/">数据库</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/个人随想/">个人随想</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/总结/">总结</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/随想/">随想</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/HTML/" style="font-size: 15px;">HTML</a> <a href="/tags/hard/" style="font-size: 15px;">hard</a> <a href="/tags/run/" style="font-size: 15px;">run</a> <a href="/tags/坑/" style="font-size: 15px;">坑</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/requestst/" style="font-size: 15px;">requestst</a> <a href="/tags/requests/" style="font-size: 15px;">requests</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/正则表达式/" style="font-size: 15px;">正则表达式</a> <a href="/tags/urllib/" style="font-size: 15px;">urllib</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">sergiojune.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/totop.js?v=2.0.1" async></script></body></html>