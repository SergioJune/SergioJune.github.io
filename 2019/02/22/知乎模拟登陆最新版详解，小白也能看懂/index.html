<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记录个人的成长"><meta name="keywords" content="python,sergiojune,记录,算法,爬虫,javacript,爆破JS"><title>知乎模拟登陆最新版详解，小白也能看懂 | sergiojune | 梦开始的地方</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">知乎模拟登陆最新版详解，小白也能看懂</h1><a id="logo" href="/.">sergiojune | 梦开始的地方</a><p class="description">路在，人就在</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">知乎模拟登陆最新版详解，小白也能看懂</h1><div class="post-meta"><a href="/2019/02/22/知乎模拟登陆最新版详解，小白也能看懂/#comments" class="comment-count"><i data-disqus-identifier="2019/02/22/知乎模拟登陆最新版详解，小白也能看懂/" class="disqus-comment-count"></i>留言</a><p><span class="date">Feb 22, 2019</span><span><a href="/categories/python/" class="category">python</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p><strong>以下内容仅交流学习，请勿用于非法用途</strong></p>
<p>如果你现在想模拟登陆知乎，会发现 fromdata 是一串加密的字符串</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-bec3f49c98f0079d?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>看了之后是不是很痛苦？你是不是就想使用 selenium 来模拟登陆？不过好像知乎对 selenium 也进行了相应的反爬处理，哈哈。但是我不也想用 selenium，效率太慢了，直接破解 js 才是我最喜欢挑战的。好，我现在教你如何用 js 硬撸破解,废话不多说，直接进入正题。</p>
<h2 id="1-找出signature加密"><a href="#1-找出signature加密" class="headerlink" title="1. 找出signature加密"></a>1. 找出signature加密</h2><p>加密位置这个相对来说是比较难找的，需要自己对那些混淆过的 js 进行一遍又一遍的搜寻，有时候你看到头皮发麻也不一定找得到，再加上这个加密参数是一堆字符串，连个键都没有，搜索的条件都没有。这怎么办呢？我们可以去百度或者谷歌看看前人是怎么搞的。</p>
<p>你直接搜索知乎模拟登陆的话，会发现以前的知乎的 fromdata 是键值形式的，有以下键值对</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-e23042075e43d900?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>顺便也可以看看之前的破解思路，看到了上面的 signature 是通过加密来的，猜测知乎应该也是对之前的键值加密的 fromdata 进行加密的，在控制台搜搜 signature 看看有没有线索</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-e058534eee75aede?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<blockquote>
<p>提示：按下 ctrl + shift + f 可出现搜索框</p>
</blockquote>
<p>一搜，果然有，看了看，signature 的加密过程和以前的还是一样的，证明我的猜想正确了，说明是通过之前的 fromdata 的键值对进行加密成的一堆字符串，现在就看看 signature 是如何加密的。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-4bcea4d46111f393?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>如果你对加密有点了解的话，还容易知道通过上面代码知道，很容易知道是<strong>通过 hmac 加密，哈希算法是 sha1，密钥为 d1b964811afb40118a12068ff74a12f4，加密数据有四个，为 clientId、grantType、timestamp 和 source</strong>，这些值都可以在上面通过调试出来的，就不多说了，如下</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-3ddb6bf78db13dd6?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h2 id="2-找出fromdata的完整键值对"><a href="#2-找出fromdata的完整键值对" class="headerlink" title="2. 找出fromdata的完整键值对"></a>2. 找出fromdata的完整键值对</h2><p>在知道 signature 是如何加密的之后，我们还需要找出完整的 fromdata 先，不过在上面的调试中，你会发现也有几个 fromdata 值，但是不全。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-8eabf2fda11d2a3b?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>这时候如果我们得继续搜索 signature 的话，找了一整天你都会发现不到什么线索，这时候我们可以通过登陆的 url 进行突破，看看 url 是哪个路径，然后一段搜。</p>
<p>其登陆url是 <strong><a href="https://www.zhihu.com/api/v3/oauth/sign_in" target="_blank" rel="noopener">https://www.zhihu.com/api/v3/oauth/sign_in</a></strong>。那我们可以直接搜 <strong>sign_in</strong> 试试。搜了发现和上面的 signature 是在同一个 js 文件上的，感觉应该有戏。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-510ce45d2eb49a7f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>这个和登陆地址完全匹配，应该就是这个了，可以进行调试一波</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-d218c662d8a97a55?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>这不出来了，经过多次调试，发现大多数值都是固定的，只有 signature 和 timestamp 不是，其他的就是账号密码之类的，还有个验证码 captcha 以及它的类型 lang，signature 上面的已经找出来了，timestamp 很明显就是时间戳，其他的就不多说了。</p>
<p>现在的 fromdata 已经全部找出来了，我们离加密字符串又近了一步，如果你直接用这个表单进行模拟登陆，会给你返回下面错误</p>
<p><code>Missing argument grant_type</code></p>
<p>可见我们还得找出这个 fromdata 的加密方法。</p>
<h2 id="3-找出-fromdata-加密位置"><a href="#3-找出-fromdata-加密位置" class="headerlink" title="3. 找出 fromdata 加密位置"></a>3. 找出 fromdata 加密位置</h2><p>如果你是第一次找这个，估计你得不断地翻 js，也不一定能找得到，或者你可以根据下面这个调用函数过程来找</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-617a2244485e9b76?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>会发现很多，不过你懂套路的话都知道加密一般都用到 encrypt 名字之类的,可以直接根据这个名字搜</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-db9ff65a92071e31?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>一搜果然有这个，通过查看你很容易就找到这个</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-4a1a21d682925694?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>这个一通过调试，你可以看到，我们的加密字符串出来了，是不是很激动，我当时找到了这个的时候激动不得了。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-eed53ffe5a5775fe?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<blockquote>
<p>这个是加密的字符串</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-02a4e1f15a001982?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<blockquote>
<p>这个就是我们需要找的</p>
</blockquote>
<p>历尽千辛万苦，终于找出了庐山真面目，激动不？先不要激动先，这只是加密的位置，后面的才是最难的！</p>
<h2 id="4-找出-fromdata-加密的所有方法"><a href="#4-找出-fromdata-加密的所有方法" class="headerlink" title="4. 找出 fromdata 加密的所有方法"></a>4. 找出 fromdata 加密的所有方法</h2><p>知道位置后，我们可以直接把这个加密的 js 方法都扣出来，放在一个 html 文件内执行就好。</p>
<p>在上面找出位置之后，很容易就可以看到这个完整的一个的加密方法</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-ac31dbe4b69f01df?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>按这个半括号向上找，你就可以找到一个完整的加密方法，这个就是整个 fromdata 的加密方法，挺容易找的，如果觉得不方便找的，可以先将这个 js 文件里面的代码复制下来，然后到 Sublime Text 软件上找，这个可以折叠，也比较容易找，找出来是这样子</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-f7652b0f02a22ea1?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>格式化之后有 400 多行，而且全是混淆，难看得一批。</p>
<p>为了看看这个正确不正确，我们可以把函数里面的内容直接拿出来，就是<strong>去掉最外层的函数，然后调用下面的函数 Q，把我们的 fromdata 传进去</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-8c354c7895815a61?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>最后将上面的 JavaScript 给弄成一个 html 文件，放在 script 标签内即可</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-17d09b7535c6f231?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>格式就和上面一样，然后直接用浏览器上打开这个 html 文件，你会看到这个</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-5cc15eeb4d207af1?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>这个就是我们一直努力在找的 fromdata 加密字符串。</p>
<p>弄完这个之后，我们继续使用 python 来操作了，因为这个 加密的方法格式化之后有 400 多行，实在太多，也全都是混淆，如果想用 python 来实现的话也不是不可能，就是成本太大了，需要的时间太多了，我们还不如直接使用 python 的 execjs 来执行 JavaScript 代码直接获得就可以了，这个简单方便。</p>
<p>(我们除了使用 execjs 来执行，还可以使用 selenium 运行这个html 文件也是可以的，但是我并不想用 selenium 这个工具，还是喜欢折腾，所以忽略了，想用的可以试试。)</p>
<p>但是这里又会有一个问题，我们用浏览器打开的是为它提供了一个浏览器的运行环境，我们在 python 使用的 execjs 提供的是 node 环境，两个环境的不一样，就会产生不同的效果，下面我们可以选择使用 webstorm 编辑器来提供 nodejs 环境来进行尝试以下。</p>
<h2 id="5-在-node-环境调试加密代码"><a href="#5-在-node-环境调试加密代码" class="headerlink" title="5. 在 node 环境调试加密代码"></a>5. 在 node 环境调试加密代码</h2><p>你可以拿上面的 JavaScript 代码在 webstorm 运行，你就会看到</p>
<p><code>TypeError: __g._encrypt is not a function</code></p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-3d5e4622957d935e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>所以我们需要调试，需要把那些在浏览器上只有的对象，比如 <strong>window、navigator</strong> 之类的对象给弄掉，从而在 node 上用不用的代码代替相同的效果即可。</p>
<p>要调试我们先要找到代码运行的开端，可以很容易找到</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-d606ab96365bb4fb?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>可以看到，这里它会先去判断有没有 window 这个对象来判断是不是在浏览器上面运行的，所以我们可以直接<strong>把它修改成 true 或者其他**</strong>表示成 true 的值都可以**</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-8ea83281785249bb?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>再次运行，可以看到这个错误</p>
<p><code>ReferenceError: atob is not defined</code></p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-f7ca7f0b1288affb?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>这个 atob 是将 base64 加密的字符串给解密，在 node 环境下是没有这个方法的，我们需要使用 Buffer.toString()替代即可。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-e750743abf04194b?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>运行之后，还是报这个错误</p>
<p><code>TypeError: __g._encrypt is not a function</code></p>
<p>注意：<strong>这个是大坑</strong>，估计一般人每个一两天还搞不定，这个是因为上面的解密的，但是上面的并不一样，你可以在上面的两个函数加断点，分别在浏览器和 node 环境下运行，可以看到解密的数据是不一样的，是<strong>因为在浏览器上的 base64 加密的是 binary 编码，解密之后也就同样需要使用 binary 编码</strong>，这个是我在知乎的资源文件上搜索 atob 这个方法，然后慢慢查找看到的，当时也差不多心态崩了，还好坚持下来了。<strong>而我在 node 环境下解密之后使用了默认的编码，所以解密的数据出错了</strong>。当我们加上 binary 编码之后，再运行</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-f10f14a4f8861236?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>这时，错误不再是上面那个了，变成了另一个，证明解密正确了，再来看看下面这个错误</p>
<p><code>execption at 11: ReferenceError: window is not defined</code></p>
<p>原来是 window 对象惹的祸，这个时候就需要我们伪造 window 对象了，至于怎样伪造呢，<strong>我们可以调试出错的地方，看看它使用了什么方法，就直接使用适合 node 运行的相同效果的代码代替就可以了</strong>，经过多次调试，需要我们伪造 window 和 navigator 这两个对象，下面就是伪造之后的代码</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-9747863af553b3a1?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>这个时候再运行看看。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-c25d7e7327ad0f39?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>可以看到成功了，上面的红色字是一个提示，关于 Buffer 的，这个我们忽略就行，接下来就可以使用 python 环境进行测试了。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-cf5ae9b95b2c9049?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-1bc79e99fe397e56?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>果然，都出来了，哈哈，注意需要先<strong>安装 PyExecJS 库</strong>，自行安装，然后在测试的时候记得导入 execjs 即可。现在这个 fromdata 算是大功告成了，接下来就是登陆验证下我们搞得这个加密对不对了。</p>
<h2 id="6-模拟登陆知乎"><a href="#6-模拟登陆知乎" class="headerlink" title="6. 模拟登陆知乎"></a>6. 模拟登陆知乎</h2><p>这个知乎的登陆也是坑满满，我也给踩了几个，这个就直接说坑吧，其他的就不多说了。</p>
<p>我只是用手机号来登陆的，也可以用邮箱登陆，过程都差不多的。</p>
<h3 id="1-请求登陆的网址的请求头需要带上这几个"><a href="#1-请求登陆的网址的请求头需要带上这几个" class="headerlink" title="1. 请求登陆的网址的请求头需要带上这几个"></a>1. 请求登陆的网址的请求头需要带上这几个</h3><p><img src="http://upload-images.jianshu.io/upload_images/6474572-0246e252fd0230d9?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>不带 content-type 的话，会给你返回这个错误</p>
<p><code>Missing argument grant_type</code></p>
<p>不带 x-zse-83 的话，会给你返回这个错误</p>
<p><code>请求参数异常，请升级客户端后重试</code></p>
<p>至于 agent-user 那就更不需要说了。</p>
<h3 id="2-请求顺序"><a href="#2-请求顺序" class="headerlink" title="2. 请求顺序"></a>2. 请求顺序</h3><p>知乎这个登陆是首<strong>先请求验证码地址</strong>，看需要不需要填写验证码，如果<strong>需要填就再请求一次，而且还需要再再请求一次查看是否输入验证码正确</strong>，不正确就重复上面步骤，<strong>当不需要填写验证码的时候就可以直接请求登陆网址了</strong>。</p>
<p>还有上面的三次请求的验证码地址的请求方法都是不一样的，哪种方法自行调试即可。</p>
<h3 id="3-验证验证码"><a href="#3-验证验证码" class="headerlink" title="3. 验证验证码"></a>3. 验证验证码</h3><p>在验证验证码的时候<strong>请求头的 content-type 不要填写 值为 multipart/form-data</strong>，如果填了请求验证码的时候会给你返回这个错误：</p>
<p><code>{&quot;error&quot;:{&quot;message&quot;:&quot;Missing argument input_text&quot;,&quot;code&quot;:400}}</code></p>
<p>它的意思是说没有带上验证码验证，当我们去掉的这个字段的时候，就可以验证了。</p>
<p>验证验证码的时候请求头只需要有一个<strong> user-agent </strong>就可以了</p>
<h3 id="4-请求的所有阶段带上-cookie"><a href="#4-请求的所有阶段带上-cookie" class="headerlink" title="4. 请求的所有阶段带上 cookie"></a>4. 请求的所有阶段带上 cookie</h3><p>知乎这个有个 cookie 值是验证码票据，是从第一次请求验证码地址来的，就是下面这个</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-e628c80e4126cccd?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>如果不带 cookie请求或者请求顺序不一样都有可能给你返回这个错误。</p>
<p><code>{&quot;error&quot;:{&quot;message&quot;:&quot;缺少验证码票据&quot;,&quot;code&quot;:120002,&quot;name&quot;:&quot;ERR_CAPSION_TICKET_NOT_FOUND&quot;}}</code></p>
<h3 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h3><p>你还想要？没有了，坑暂时只有这么多，最后给你们看下登陆成功的结果</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-a4d8f084d04c9cd0?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h2 id="7-写在最后"><a href="#7-写在最后" class="headerlink" title="7. 写在最后"></a>7. 写在最后</h2><p>这个登陆折腾了差不多一周了，实际来说可能是三周，因为从刚开始看不懂 js 代码，就跑去学了两周 js，现在总得来说 js 也可以说上手了，以后或许也会使用 nodejs 搞点爬虫，挺好玩的。</p>
<p><strong>至于代码，暂时不公布了，如果你一步一步按照我方法来弄的话估计也可以，前提的有 js 基础最好，以后会公布的，等我再完善先，因为还需要干别的东西。如果有问题也可以找我，加我微信 june–98 拉你进群讨论即可</strong>。</p>
<p>折腾这个，掉了不少头发，但听说<strong>分享点赞是生发之道</strong>，所以你们懂的！</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6474572-ed16e0b5bab8baf9?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
</div><div class="tags"><a href="/tags/login/">login</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2019/03/02/教你如何将自己的脚本代码放到服务器上运行/" class="pre">教你如何将自己的脚本代码放到服务器上运行</a><a href="/2019/02/14/爬虫不得不学之 JavaScript 函数对象篇/" class="next">爬虫不得不学之 JavaScript 函数对象篇</a></div><div id="comments"><div id="disqus_thread"></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-找出signature加密"><span class="toc-text">1. 找出signature加密</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-找出fromdata的完整键值对"><span class="toc-text">2. 找出fromdata的完整键值对</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-找出-fromdata-加密位置"><span class="toc-text">3. 找出 fromdata 加密位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-找出-fromdata-加密的所有方法"><span class="toc-text">4. 找出 fromdata 加密的所有方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-在-node-环境调试加密代码"><span class="toc-text">5. 在 node 环境调试加密代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-模拟登陆知乎"><span class="toc-text">6. 模拟登陆知乎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-请求登陆的网址的请求头需要带上这几个"><span class="toc-text">1. 请求登陆的网址的请求头需要带上这几个</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-请求顺序"><span class="toc-text">2. 请求顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-验证验证码"><span class="toc-text">3. 验证验证码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-请求的所有阶段带上-cookie"><span class="toc-text">4. 请求的所有阶段带上 cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5"><span class="toc-text">5.</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-写在最后"><span class="toc-text">7. 写在最后</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/03/24/two_sum_1/">leetcode_two-sum-1</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/24/19-03-04复盘/">最近的生活状态的复盘</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/19/请求网页时，怎么给我返回了一段 JavaScript 代码/">请求网页时，怎么给我返回了一段 JavaScript 代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/12/python运行execjs中出现编码问题/">python运行execjs中出现编码问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/12/豆瓣读书搜索页的window.__DATA__的解密/">豆瓣读书搜索页的window.__DATA__的解密</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/02/deactivate不是内部命令/">deactivate不是内部命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/02/scrapy重定向/">scrapy 重定向</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/02/教你如何将自己的脚本代码放到服务器上运行/">教你如何将自己的脚本代码放到服务器上运行</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/22/知乎模拟登陆最新版详解，小白也能看懂/">知乎模拟登陆最新版详解，小白也能看懂</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/14/爬虫不得不学之 JavaScript 函数对象篇/">爬虫不得不学之 JavaScript 函数对象篇</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Fiddler/">Fiddler</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/adb/">adb</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/execjs/">execjs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">20</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/python/数据库/">数据库</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/scrapy/">scrapy</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/virtualenv/">virtualenv</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/个人随想/">个人随想</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/基础/">基础</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/复盘/">复盘</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/总结/">总结</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/抓包/">抓包</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/">数据结构</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器/">服务器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/爆破JS/">爆破JS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/字体反爬/" style="font-size: 15px;">字体反爬</a> <a href="/tags/复盘/" style="font-size: 15px;">复盘</a> <a href="/tags/deactivate/" style="font-size: 15px;">deactivate</a> <a href="/tags/hard/" style="font-size: 15px;">hard</a> <a href="/tags/c/" style="font-size: 15px;">c</a> <a href="/tags/坑/" style="font-size: 15px;">坑</a> <a href="/tags/重定向/" style="font-size: 15px;">重定向</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/编码/" style="font-size: 15px;">编码</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/足球/" style="font-size: 15px;">足球</a> <a href="/tags/栈/" style="font-size: 15px;">栈</a> <a href="/tags/单链表-冒泡排序/" style="font-size: 15px;">单链表 冒泡排序</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/mitmproxy/" style="font-size: 15px;">mitmproxy</a> <a href="/tags/adb/" style="font-size: 15px;">adb</a> <a href="/tags/数组/" style="font-size: 15px;">数组</a> <a href="/tags/单链表/" style="font-size: 15px;">单链表</a> <a href="/tags/时间复杂度/" style="font-size: 15px;">时间复杂度</a> <a href="/tags/豆瓣解密/" style="font-size: 15px;">豆瓣解密</a> <a href="/tags/requestst/" style="font-size: 15px;">requestst</a> <a href="/tags/抓包/" style="font-size: 15px;">抓包</a> <a href="/tags/服务器/" style="font-size: 15px;">服务器</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/cookie反爬/" style="font-size: 15px;">cookie反爬</a> <a href="/tags/login/" style="font-size: 15px;">login</a> <a href="/tags/胡思乱想/" style="font-size: 15px;">胡思乱想</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/requests/" style="font-size: 15px;">requests</a> <a href="/tags/正则表达式/" style="font-size: 15px;">正则表达式</a> <a href="/tags/urllib/" style="font-size: 15px;">urllib</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://sergiojune.com/about/" title="需要设置请联系我" target="_blank">需要设置请联系我</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">sergiojune.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?369f545b712d2094aad4beda81dc7259";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script><script>var disqus_shortname = 'sergiojune';
var disqus_identifier = '2019/02/22/知乎模拟登陆最新版详解，小白也能看懂/';
var disqus_title = '知乎模拟登陆最新版详解，小白也能看懂';
var disqus_url = 'http://sergiojune.com/2019/02/22/知乎模拟登陆最新版详解，小白也能看懂/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//sergiojune.disqus.com/count.js" async></script><script type="text/javascript" src="//sergiojune.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></body></html>